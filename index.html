<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>√în T·∫≠p To√°n 11 - C·∫•u Tr√∫c M·ªõi</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- MathJax Configuration -->
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true
        },
        svg: {
            fontCache: 'global'
        }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; overscroll-behavior: none; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .pt-safe { padding-top: env(safe-area-inset-top); }
        
        /* Custom Styles */
        .math-content { font-size: 1.05em; line-height: 1.6; }
        .math-content table { font-size: 0.9em; margin-top: 0.5rem; margin-bottom: 0.5rem; border-collapse: collapse; width: 100%; }
        .math-content th, .math-content td { padding: 0.5rem; border: 1px solid #d1d5db; text-align: center; }
        .math-content th { background-color: #f3f4f6; font-weight: 600; }
        
        .option-radio:checked + div { border-color: #3b82f6; background-color: #eff6ff; box-shadow: 0 0 0 2px #3b82f6 inset; }
        
        /* TF Toggle Styles */
        .tf-btn { transition: all 0.2s; }
        .tf-btn.selected-true { background-color: #3b82f6; color: white; border-color: #3b82f6; }
        .tf-btn.selected-false { background-color: #ef4444; color: white; border-color: #ef4444; }
        
        /* Result Styles */
        .correct-answer { background-color: #dcfce7; border-color: #22c55e; color: #14532d; }
        .wrong-answer { background-color: #fee2e2; border-color: #ef4444; color: #7f1d1d; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="text-gray-800 h-[100dvh] w-full flex flex-col md:items-center md:justify-center md:p-4 overflow-hidden">

    <!-- GAME CONTAINER -->
    <div id="game-container" class="w-full h-full md:h-[95vh] md:max-w-4xl bg-white md:rounded-2xl shadow-xl overflow-hidden flex flex-col relative">
        
        <!-- HEADER -->
        <div class="bg-blue-700 text-white p-4 pt-safe flex justify-between items-center shadow-md z-30 shrink-0">
            <div>
                <h1 class="font-bold text-lg flex items-center gap-2">
                    <span class="text-xl">üìù</span> 
                    <span class="font-bold">ƒê·ªÄ KI·ªÇM TRA TO√ÅN 11</span>
                </h1>
                <p id="player-display" class="text-xs text-blue-200 hidden mt-1">H·ªçc sinh: -- | L·ªõp: --</p>
            </div>
            <div id="timer-box" class="hidden bg-white/20 backdrop-blur px-3 py-1 rounded-lg font-mono text-lg font-bold border border-white/30 whitespace-nowrap">
                90:00
            </div>
        </div>

        <!-- CONTENT AREA -->
        <div id="content-area" class="flex-grow overflow-y-auto bg-gray-50 scroll-smooth relative">
            
            <!-- SCREEN 1: START -->
            <div id="start-screen" class="flex flex-col items-center justify-center min-h-full p-6 animate-fade-in text-center">
                <div class="mb-8 p-4 bg-white rounded-full shadow-lg">
                    <span class="text-6xl">üìö</span>
                </div>
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">ƒê·ªÅ C∆∞∆°ng √în T·∫≠p HK1</h2>
                <p class="text-gray-500 mb-8 max-w-md">C·∫•u tr√∫c ƒë·ªÅ chu·∫©n: 12 c√¢u Tr·∫Øc nghi·ªám, 4 c√¢u ƒê√∫ng/Sai, 6 c√¢u Tr·∫£ l·ªùi ng·∫Øn.</p>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 w-full max-w-sm mb-6 text-left space-y-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">H·ªç v√† t√™n:</label>
                        <input type="text" id="student-name" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none" />
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">L·ªõp:</label>
                        <input type="text" id="student-class" placeholder="V√≠ d·ª•: 11A1" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none" />
                    </div>
                </div>

                <button onclick="startGame()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-xl shadow-lg transform transition active:scale-95 w-full max-w-xs">
                    L√ÄM B√ÄI NGAY
                </button>
            </div>

            <!-- SCREEN 2: QUIZ FORM -->
            <div id="quiz-screen" class="hidden p-4 md:p-8 space-y-8 pb-32">
                <!-- Part 1: MCQ -->
                <div id="section-1" class="space-y-4">
                    <div class="bg-blue-50 p-4 rounded-xl border border-blue-200 flex items-center gap-3 sticky top-0 z-10 shadow-sm">
                        <span class="bg-blue-600 text-white font-bold px-3 py-1 rounded text-sm">PH·∫¶N 1</span>
                        <h3 class="font-bold text-blue-900">Tr·∫Øc nghi·ªám (12 c√¢u - 3.0 ƒëi·ªÉm)</h3>
                    </div>
                    <div id="list-mcq" class="space-y-6"></div>
                </div>

                <!-- Part 2: True/False -->
                <div id="section-2" class="space-y-4 pt-4 border-t-2 border-dashed border-gray-200">
                    <div class="bg-purple-50 p-4 rounded-xl border border-purple-200 flex items-center gap-3 sticky top-0 z-10 shadow-sm">
                        <span class="bg-purple-600 text-white font-bold px-3 py-1 rounded text-sm">PH·∫¶N 2</span>
                        <h3 class="font-bold text-purple-900">ƒê√∫ng / Sai (4 c√¢u - 4.0 ƒëi·ªÉm)</h3>
                    </div>
                    <div id="list-tf" class="space-y-6"></div>
                </div>

                <!-- Part 3: Short Answer -->
                <div id="section-3" class="space-y-4 pt-4 border-t-2 border-dashed border-gray-200">
                    <div class="bg-orange-50 p-4 rounded-xl border border-orange-200 flex items-center gap-3 sticky top-0 z-10 shadow-sm">
                        <span class="bg-orange-600 text-white font-bold px-3 py-1 rounded text-sm">PH·∫¶N 3</span>
                        <h3 class="font-bold text-orange-900">Tr·∫£ l·ªùi ng·∫Øn (6 c√¢u - 3.0 ƒëi·ªÉm)</h3>
                    </div>
                    <div id="list-short" class="space-y-6"></div>
                </div>
            </div>

            <!-- SCREEN 3: RESULT -->
            <div id="result-screen" class="hidden p-4 min-h-full flex flex-col items-center">
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200 w-full max-w-2xl text-center mb-6 animate-fade-in">
                    <div class="text-5xl mb-4" id="result-emoji">üèÜ</div>
                    <h2 class="text-3xl font-black text-gray-800 mb-1" id="total-score">0.00</h2>
                    <p class="text-gray-500 font-medium mb-4">ƒêi·ªÉm T·ªïng K·∫øt / 10</p>
                    
                    <div class="grid grid-cols-3 gap-2 mb-6 text-sm">
                        <div class="bg-blue-50 p-2 rounded-lg border border-blue-100">
                            <div class="font-bold text-blue-800">P1. Tr·∫Øc Nghi·ªám</div>
                            <div id="score-p1" class="text-lg font-bold">0/3</div>
                        </div>
                        <div class="bg-purple-50 p-2 rounded-lg border border-purple-100">
                            <div class="font-bold text-purple-800">P2. ƒê√∫ng Sai</div>
                            <div id="score-p2" class="text-lg font-bold">0/4</div>
                        </div>
                        <div class="bg-orange-50 p-2 rounded-lg border border-orange-100">
                            <div class="font-bold text-orange-800">P3. ƒêi·ªÅn Khuy·∫øt</div>
                            <div id="score-p3" class="text-lg font-bold">0/3</div>
                        </div>
                    </div>

                    <div id="submit-status" class="mb-4 text-sm font-medium text-gray-500 hidden">
                        ƒêang l∆∞u ƒëi·ªÉm...
                    </div>

                    <div class="flex gap-3 justify-center">
                        <button onclick="restartGame()" class="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-lg transition">L√†m L·∫°i</button>
                        <button onclick="showDetailReview()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition shadow-md">Xem Chi Ti·∫øt</button>
                    </div>
                </div>
                
                <div id="review-container" class="w-full max-w-3xl hidden space-y-6 pb-20">
                    <h3 class="font-bold text-gray-700 px-2 border-l-4 border-blue-500">CHI TI·∫æT B√ÄI L√ÄM & H∆Ø·ªöNG D·∫™N</h3>
                    <div id="review-content" class="space-y-6"></div>
                </div>
            </div>

        </div>

        <!-- FOOTER ACTION -->
        <div id="footer-actions" class="hidden bg-white border-t border-gray-200 p-4 pb-safe z-30 shadow-[0_-4px_15px_-3px_rgba(0,0,0,0.1)] flex justify-between items-center">
            <div class="text-xs text-gray-500 font-medium">
                <p>ƒê√£ ho√†n th√†nh: <span id="progress-count">0/22</span> c√¢u</p>
                <div class="w-24 h-1.5 bg-gray-200 rounded-full mt-1 overflow-hidden">
                    <div id="mini-progress" class="bg-green-500 h-full w-0 transition-all"></div>
                </div>
            </div>
            <button onclick="submitTest()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 px-8 rounded-lg shadow-lg transform transition active:scale-95 flex items-center gap-2">
                <span>N·ªòP B√ÄI</span>
            </button>
        </div>
    </div>

    <!-- DATA & LOGIC -->
    <script>
        // --- CONFIGURATION ---
        // H√£y d√°n URL Web App c·ªßa Google Script v√†o gi·ªØa hai d·∫•u ngo·∫∑c k√©p b√™n d∆∞·ªõi
        // V√≠ d·ª•: "https://script.google.com/macros/s/AKfycbx.../exec"
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycby8SdIB5KVcnyFXBkbaPdXkjy6VIrFMVFr3i7OSvuenlju0fkOSxKq-xN4Y7cx9tQvBlQ/exec"; 

        // --- DATA BANKS ---
        // (Gi·ªØ nguy√™n n·ªôi dung ng√¢n h√†ng c√¢u h·ªèi nh∆∞ phi√™n b·∫£n tr∆∞·ªõc)
        
        // 1. NG√ÇN H√ÄNG TR·∫ÆC NGHI·ªÜM (MCQ)
        const bankMCQ = [
            { 
                q: "Th·ªùi gian ch·∫°y trung b√¨nh c·ª± li 1000m (gi√¢y) c·ªßa c√°c b·∫°n h·ªçc sinh l√† (d·ª±a v√†o b·∫£ng ph√¢n b·ªë t·∫ßn s·ªë gh√©p l·ªõp sau):<div class='overflow-x-auto'><table class='w-full'><tr><th>Th·ªùi gian (s)</th><td>[120;125)</td><td>[125;130)</td><td>[130;135)</td><td>[135;140)</td><td>[140;145)</td></tr><tr><th>S·ªë h·ªçc sinh</th><td>5</td><td>16</td><td>12</td><td>5</td><td>2</td></tr></table></div>", 
                a: "130,35", b: "131,03", c: "130,4", d: "132,5", correct: "c",
                explain: "B∆∞·ªõc 1: T√≠nh gi√° tr·ªã ƒë·∫°i di·ªán ($c_i$) c·ªßa m·ªói l·ªõp (trung b√¨nh c·ªông 2 ƒë·∫ßu m√∫t):<br> $c_1=122,5; c_2=127,5; c_3=132,5; c_4=137,5; c_5=142,5$.<br>B∆∞·ªõc 2: √Åp d·ª•ng c√¥ng th·ª©c s·ªë trung b√¨nh: $\\bar{x} = \\frac{5.122,5 + 16.127,5 + 12.132,5 + 5.137,5 + 2.142,5}{40}$.<br>B∆∞·ªõc 3: T√≠nh to√°n: $\\bar{x} = \\frac{612,5 + 2040 + 1590 + 687,5 + 285}{40} = \\frac{5215}{40} = 130,375$.<br>L√†m tr√≤n 130,4."
            },
            { q: "Nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh $cos~x=-\\frac{1}{2}$ l√†:", a: "$x=\\pm\\frac{2\\pi}{3}+k2\\pi$", b: "$x=\\pm\\frac{\\pi}{6}+k\\pi$", c: "$x=\\pm\\frac{\\pi}{3}+k2\\pi$", d: "$x=\\pm\\frac{\\pi}{6}+k2\\pi$", correct: "a", explain: "Ta c√≥ $cos(\\frac{2\\pi}{3}) = -\\frac{1}{2}$.<br>Ph∆∞∆°ng tr√¨nh tr·ªü th√†nh $cos x = cos(\\frac{2\\pi}{3})$.<br>C√¥ng th·ª©c nghi·ªám: $x = \\pm \\alpha + k2\\pi$.<br>V·∫≠y $x = \\pm\\frac{2\\pi}{3} + k2\\pi$." },
            { q: "V·ªõi $n\\in\\mathbb{N}^{*}$, cho d√£y s·ªë $(u_{n})$ g·ªìm c√°c s·ªë nguy√™n d∆∞∆°ng chia h·∫øt cho 7: 7, 14, 21, 28, ... C√¥ng th·ª©c s·ªë h·∫°ng t·ªïng qu√°t c·ªßa d√£y s·ªë n√†y l√†:", a: "$u_{n}=7n-7$", b: "$u_{n}=7n+7$", c: "$u_{n}=7n$", d: "$u_{n}=7n^{2}$", correct: "c", explain: "C√°c s·ªë chia h·∫øt cho 7 l√† b·ªôi c·ªßa 7.<br>S·ªë th·ª© 1: $7.1=7$.<br>S·ªë th·ª© 2: $7.2=14$.<br>...<br>S·ªë th·ª© n: $7.n$.<br>V·∫≠y $u_n = 7n$." },
            { q: "Cho c·∫•p s·ªë c·ªông $(u_{n})$ c√≥ $u_{1}=1$ v√† c√¥ng sai $d=2$. T·ªïng 10 s·ªë h·∫°ng ƒë·∫ßu c·ªßa c·∫•p s·ªë c·ªông b·∫±ng:", a: "$S_{10}=110$", b: "$S_{10}=100$", c: "$S_{10}=21$", d: "$S_{10}=19$", correct: "b", explain: "C√¥ng th·ª©c t·ªïng n s·ªë h·∫°ng ƒë·∫ßu c·ªßa CSC: $S_n = \\frac{n}{2}[2u_1 + (n-1)d]$.<br>V·ªõi $n=10, u_1=1, d=2$:<br>$S_{10} = \\frac{10}{2}[2.1 + 9.2] = 5[2 + 18] = 5.20 = 100$." },
            { q: "Cho c·∫•p s·ªë nh√¢n $(u_{n})$ c√≥ s·ªë h·∫°ng ƒë·∫ßu $u_{1}=5$ v√† c√¥ng b·ªôi $q=-2$. S·ªë h·∫°ng th·ª© s√°u c·ªßa $(u_{n})$ l√†:", a: "$u_{6}=160$", b: "$u_{6}=-320$", c: "$u_{6}=-160$", d: "$u_{6}=320$", correct: "c", explain: "C√¥ng th·ª©c SHTQ c·ªßa CSN: $u_n = u_1 . q^{n-1}$.<br>V·ªõi $n=6$: $u_6 = 5 . (-2)^{6-1} = 5 . (-2)^5$.<br>$u_6 = 5 . (-32) = -160$." },
            { 
                q: "M·∫´u s·ªë li·ªáu sau cho bi·∫øt c√¢n n·∫∑ng c·ªßa h·ªçc sinh l·ªõp 12 trong m·ªôt l·ªõp:<div class='overflow-x-auto'><table class='w-full'><tr><th>C√¢n n·∫∑ng</th><td>D∆∞·ªõi 55</td><td>T·ª´ 55 ƒë·∫øn 65</td><td>Tr√™n 65</td></tr><tr><th>S·ªë h·ªçc sinh</th><td>20</td><td>15</td><td>2</td></tr></table></div>S·ªë h·ªçc sinh c·ªßa l·ªõp ƒë√≥ l√† bao nhi√™u?", 
                a: "37", b: "35", c: "33", d: "31", correct: "a", explain: "T·ªïng s·ªë h·ªçc sinh b·∫±ng t·ªïng t·∫ßn s·ªë c√°c nh√≥m.<br>N = 20 + 15 + 2 = 37 h·ªçc sinh." 
            },
            { q: "Trong m·∫∑t ph·∫≥ng ($\\alpha$), cho t·ª© gi√°c ABCD c√≥ AB c·∫Øt CD t·∫°i E, AC c·∫Øt BD t·∫°i F, S l√† ƒëi·ªÉm kh√¥ng thu·ªôc ($\\alpha$). Giao tuy·∫øn c·ªßa (SAB) v√† (SCD) l√†:", a: "SF", b: "SD", c: "AC", d: "SE", correct: "d", explain: "- ƒêi·ªÉm chung th·ª© nh·∫•t: S (hi·ªÉn nhi√™n).<br>- ƒêi·ªÉm chung th·ª© hai: X√©t m·∫∑t ph·∫≥ng ƒë√°y (ABCD). Ta c√≥ $E = AB \\cap CD$.<br>V√¨ $E \\in AB \\subset (SAB)$ v√† $E \\in CD \\subset (SCD)$ n√™n E l√† ƒëi·ªÉm chung th·ª© hai.<br>V·∫≠y giao tuy·∫øn l√† ƒë∆∞·ªùng th·∫≥ng SE." },
            { q: "Cho h√¨nh ch√≥p t·ª© gi√°c S.ABCD, g·ªçi M v√† N l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c√°c c·∫°nh SA v√† SC. Khi ƒë√≥ MN song song v·ªõi ƒë∆∞·ªùng th·∫≥ng:", a: "AC", b: "BC", c: "CD", d: "AD", correct: "a", explain: "X√©t tam gi√°c SAC:<br>M l√† trung ƒëi·ªÉm SA.<br>N l√† trung ƒëi·ªÉm SC.<br>Suy ra MN l√† ƒë∆∞·ªùng trung b√¨nh c·ªßa tam gi√°c SAC.<br>Do ƒë√≥ MN // AC." },
            { q: "Ch·ªçn kh·∫≥ng ƒë·ªãnh ƒë√∫ng trong c√°c kh·∫≥ng ƒë·ªãnh sau.", a: "Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng song song v·ªõi m·ªôt m·∫∑t ph·∫≥ng th√¨ song song v·ªõi nhau.", b: "N·∫øu $a//(P)$ th√¨ t·ªìn t·∫°i trong (P) ƒë∆∞·ªùng th·∫≥ng b ƒë·ªÉ $b // a$.", c: "N·∫øu $a \\not\\subset (P)$ v√† $b\\subset(P)$ th√¨ $a // b.$", d: "N·∫øu $a//(P)$ v√† ƒë∆∞·ªùng th·∫≥ng b c·∫Øt m·∫∑t ph·∫≥ng (P) th√¨ hai ƒë∆∞·ªùng th·∫≥ng a v√† b c·∫Øt nhau.", correct: "b", explain: "Theo ƒë·ªãnh nghƒ©a v√† t√≠nh ch·∫•t ƒë∆∞·ªùng th·∫≥ng song song m·∫∑t ph·∫≥ng:<br>N·∫øu $a // (P)$ th√¨ a song song v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng n√†o ƒë√≥ n·∫±m trong (P)." },
            { q: "Cho h√¨nh lƒÉng tr·ª• tam gi√°c, ch·ªçn kh·∫≥ng ƒë·ªãnh sai.", a: "Hai ƒë√°y n·∫±m tr√™n 2 m·∫∑t ph·∫≥ng song song.", b: "C√°c c·∫°nh b√™n song song v·ªõi nhau.", c: "Hai tam gi√°c ƒë√°y b·∫±ng nhau.", d: "C√°c m·∫∑t b√™n l√† h√¨nh ch·ªØ nh·∫≠t.", correct: "d", explain: "T√≠nh ch·∫•t h√¨nh lƒÉng tr·ª•:<br>- Hai ƒë√°y song song v√† b·∫±ng nhau (ƒê√∫ng).<br>- C√°c c·∫°nh b√™n song song v√† b·∫±ng nhau (ƒê√∫ng).<br>- C√°c m·∫∑t b√™n l√† h√¨nh b√¨nh h√†nh. Ch·ªâ khi l√† 'LƒÉng tr·ª• ƒë·ª©ng' th√¨ c√°c m·∫∑t b√™n m·ªõi l√† h√¨nh ch·ªØ nh·∫≠t. Do ƒë·ªÅ b√†i ch·ªâ n√≥i 'lƒÉng tr·ª• tam gi√°c' chung chung n√™n kh·∫≥ng ƒë·ªãnh D sai." },
            { q: "Gi·ªõi h·∫°n $\\lim\\frac{2}{n-3}$ b·∫±ng:", a: "$+\\infty$", b: "2", c: "$-\\frac{2}{3}$", d: "0", correct: "d", explain: "Chia c·∫£ t·ª≠ v√† m·∫´u cho n (ho·∫∑c nh·∫≠n x√©t b·∫≠c):<br>T·ª≠ b·∫≠c 0, M·∫´u b·∫≠c 1.<br>B·∫≠c t·ª≠ < B·∫≠c m·∫´u => Gi·ªõi h·∫°n b·∫±ng 0." },
            { q: "T√≠nh gi·ªõi h·∫°n $\\lim_{x\\rightarrow1}\\frac{2x^{3}+3x-1}{x^{2}+1}$ ta ƒë∆∞·ª£c k·∫øt qu·∫£ b·∫±ng:", a: "1", b: "2", c: "3", d: "4", correct: "b", explain: "H√†m s·ªë x√°c ƒë·ªãnh t·∫°i x=1. Thay tr·ª±c ti·∫øp:<br>T·ª≠: $2(1)^3 + 3(1) - 1 = 4$.<br>M·∫´u: $1^2 + 1 = 2$.<br>K·∫øt qu·∫£: 4/2 = 2." },
            { q: "Cho 2 ƒë∆∞·ªùng th·∫≥ng a,b c·∫Øt nhau v√† kh√¥ng ƒëi qua ƒëi·ªÉm A. X√°c ƒë·ªãnh ƒë∆∞·ª£c nhi·ªÅu nh·∫•t bao nhi√™u m·∫∑t ph·∫≥ng b·ªüi a, b v√† A?", a: "4", b: "3", c: "2", d: "1", correct: "b", explain: "C√°c m·∫∑t ph·∫≥ng c√≥ th·ªÉ t·∫°o th√†nh:<br>1. M·∫∑t ph·∫≥ng ch·ª©a 2 ƒë∆∞·ªùng th·∫≥ng c·∫Øt nhau (a, b).<br>2. M·∫∑t ph·∫≥ng x√°c ƒë·ªãnh b·ªüi ƒëi·ªÉm A v√† ƒë∆∞·ªùng th·∫≥ng a (A, a).<br>3. M·∫∑t ph·∫≥ng x√°c ƒë·ªãnh b·ªüi ƒëi·ªÉm A v√† ƒë∆∞·ªùng th·∫≥ng b (A, b).<br>T·ªïng c·ªông t·ªëi ƒëa 3 m·∫∑t ph·∫≥ng." },
            { 
                q: "Nh√≥m ch·ª©a m·ªët c·ªßa m·∫´u s·ªë li·ªáu sau l√†:<div class='overflow-x-auto'><table class='w-full'><tr><th>Nh√≥m</th><td>[50;52)</td><td>[52;54)</td><td>[54;56)</td><td>[56;58)</td><td>[58;60)</td></tr><tr><th>T·∫ßn s·ªë</th><td>5</td><td>8</td><td>12</td><td>7</td><td>4</td></tr></table></div>", 
                a: "[54;56)", b: "[50:52)", c: "[52:54)", d: "[58;60)", correct: "a", explain: "Nh√≥m ch·ª©a m·ªët l√† nh√≥m c√≥ t·∫ßn s·ªë l·ªõn nh·∫•t.<br>Quan s√°t b·∫£ng: T·∫ßn s·ªë l·ªõn nh·∫•t l√† 12.<br>Nh√≥m t∆∞∆°ng ·ª©ng l√† [54; 56)." 
            },
            { q: "Cho hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát a v√† b c√πng thu·ªôc m·∫∑t ph·∫≥ng ($\\alpha$). C√≥ bao nhi√™u v·ªã tr√≠ t∆∞∆°ng ƒë·ªëi gi·ªØa hai ƒë∆∞·ªùng th·∫≥ng a v√† b?", a: "4", b: "3", c: "2", d: "1", correct: "c", explain: "Trong c√πng m·ªôt m·∫∑t ph·∫≥ng, hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát ch·ªâ c√≥ 2 v·ªã tr√≠ t∆∞∆°ng ƒë·ªëi:<br>1. C·∫Øt nhau (c√≥ 1 ƒëi·ªÉm chung).<br>2. Song song (kh√¥ng c√≥ ƒëi·ªÉm chung)." },
            { q: "Gi·∫£i ph∆∞∆°ng tr√¨nh $cot(3x-1)=-\\sqrt{3}.$", a: "$x=\\frac{1}{3}+\\frac{5\\pi}{18}+k\\frac{\\pi}{3}(k\\in Z)$", b: "$x=\\frac{1}{3}+\\frac{\\pi}{18}+k\\frac{\\pi}{3}(k\\in Z)$", c: "$x=\\frac{5\\pi}{18}+k\\frac{\\pi}{3}(k\\in Z)$", d: "$x=\\frac{1}{3}-\\frac{\\pi}{6}+k\\pi(k\\in Z)$", correct: "a", explain: "Ta c√≥ $-\\sqrt{3} = cot(\\frac{5\\pi}{6})$.<br>$3x - 1 = \\frac{5\\pi}{6} + k\\pi$<br>$3x = 1 + \\frac{5\\pi}{6} + k\\pi$<br>$x = \\frac{1}{3} + \\frac{5\\pi}{18} + k\\frac{\\pi}{3}$." },
            { q: "Trong c√°c d√£y s·ªë sau, d√£y s·ªë n√†o b·ªã ch·∫∑n tr√™n?", a: "$(u_{n}):u_{n}=n^{3}$", b: "$(v_{n}):v_{n}=-n^{2}+2$", c: "$(k_{n}):k_{n}=n^{2}-6n$", d: "$(a_{n}):a_{n}=(-4)^{n}$", correct: "b", explain: "X√©t $v_n = 2 - n^2$.<br>V√¨ $n \\ge 1 \\Rightarrow n^2 \\ge 1 \\Rightarrow -n^2 \\le -1$.<br>Suy ra $v_n \\le 2 - 1 = 1$.<br>D√£y s·ªë lu√¥n nh·ªè h∆°n ho·∫∑c b·∫±ng 1 n√™n b·ªã ch·∫∑n tr√™n." },
            { q: "Cho c·∫•p s·ªë c·ªông $(u_{n})$ c√≥ s·ªë h·∫°ng ƒë·∫ßu $u_{1}=-5$ v√† c√¥ng sai d = 3. S·ªë 100 l√† s·ªë h·∫°ng th·ª© m·∫•y c·ªßa c·∫•p s·ªë c·ªông?", a: "15", b: "20", c: "35", d: "36", correct: "d", explain: "C√¥ng th·ª©c: $u_n = u_1 + (n-1)d$.<br>$100 = -5 + (n-1)3$<br>$105 = 3(n-1)$<br>$n-1 = 35 \\Rightarrow n=36$." },
            { q: "Cho d√£y s·ªë $(u_n)$ bi·∫øt $\\begin{cases}u_{1}=3\\\\ u_{n+1}=3u_{n}\\end{cases},\\forall n\\in N^{*}$. T√¨m s·ªë h·∫°ng t·ªïng qu√°t c·ªßa d√£y s·ªë $(u_n)$.", a: "$u_{n}=3^{n}$", b: "$u_{n}=n^{n+1}$", c: "$u_{n}=3^{n+1}$", d: "$u_{n}=3^{n-1}$", correct: "a", explain: "H·ªá th·ª©c truy h·ªìi $u_{n+1} = 3u_n$ cho th·∫•y ƒë√¢y l√† CSN v·ªõi c√¥ng b·ªôi q=3.<br>S·ªë h·∫°ng ƒë·∫ßu $u_1=3$.<br>SHTQ: $u_n = u_1 . q^{n-1} = 3 . 3^{n-1} = 3^n$." },
            { q: "Cho d√£y s·ªë li·ªáu th·ªëng k√™: 21, 23, 24, 25, 22, 20. S·ªë trung b√¨nh c·ªông c·ªßa d√£y s·ªë li·ªáu th·ªëng k√™ ƒë√£ cho l√†:", a: "23,5", b: "22", c: "22,5", d: "14", correct: "c", explain: "C·ªông t·∫•t c·∫£ gi√° tr·ªã: $21+23+24+25+22+20 = 135$.<br>Chia cho s·ªë l∆∞·ª£ng (6): $135 / 6 = 22,5$." },
            { q: "Cho t·ª© di·ªán ABCD, G l√† tr·ªçng t√¢m tam gi√°c ABD. Tr√™n ƒëo·∫°n BC l·∫•y ƒëi·ªÉm M sao cho $MB=2MC$. Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒë√∫ng?", a: "MG song song (ACD)", b: "MG song song (ABD)", c: "MG song song (ACB)", d: "MG song song (BCD)", correct: "a", explain: "G·ªçi I l√† trung ƒëi·ªÉm AD. V√¨ G l√† tr·ªçng t√¢m tam gi√°c ABD n√™n $\\frac{BG}{BI} = \\frac{2}{3}$.<br>Theo gi·∫£ thi·∫øt $MB=2MC \\Rightarrow \\frac{BM}{BC} = \\frac{2}{3}$.<br>Trong tam gi√°c IBC, ta c√≥ $\\frac{BG}{BI} = \\frac{BM}{BC} = \\frac{2}{3} \\Rightarrow GM // IC$.<br>M√† $IC \\subset (ACD)$.<br>Suy ra $MG // (ACD)$." },
            { q: "Trong c√°c kh·∫≥ng ƒë·ªãnh sau kh·∫≥ng ƒë·ªãnh n√†o sai?", a: "N·∫øu m·ªôt ƒë∆∞·ªùng th·∫≥ng song song v·ªõi m·ªôt trong hai m·∫∑t ph·∫≥ng song song th√¨ n√≥ song song v·ªõi m·∫∑t ph·∫≥ng c√≤n l·∫°i.", b: "N·∫øu m·ªôt ƒë∆∞·ªùng th·∫≥ng c·∫Øt m·ªôt trong hai m·∫∑t ph·∫≥ng song song th√¨ n√≥ c·∫Øt m·∫∑t ph·∫≥ng c√≤n l·∫°i.", c: "N·∫øu hai ƒë∆∞·ªùng th·∫≥ng song song th√¨ ch√∫ng c√πng n·∫±m tr√™n m·ªôt m·∫∑t ph·∫≥ng.", d: "N·∫øu hai m·∫∑t ph·∫≥ng ph√¢n bi·ªát c√πng song song v·ªõi m·ªôt m·∫∑t ph·∫≥ng th√¨ ch√∫ng song song v·ªõi nhau.", correct: "a", explain: "Ph·∫£n v√≠ d·ª• cho c√¢u A: Cho hai m·∫∑t ph·∫≥ng (P) // (Q). ƒê∆∞·ªùng th·∫≥ng d n·∫±m trong (Q). Khi ƒë√≥ d // (P), nh∆∞ng d n·∫±m trong (Q) ch·ª© kh√¥ng song song v·ªõi (Q)." },
            { q: "N·∫øu c√°c d√£y s·ªë $(u_{n})$, $(v_n)$ th·ªèa m√£n $lim~u_{n}=4$ v√† $lim~v_{n}=3$ th√¨ $lim(u_{n}+v_{n})$ b·∫±ng:", a: "12", b: "7", c: "1", d: "4/3", correct: "b", explain: "Gi·ªõi h·∫°n c·ªßa m·ªôt t·ªïng b·∫±ng t·ªïng c√°c gi·ªõi h·∫°n: $4 + 3 = 7$." },
            { q: "Cho c l√† h·∫±ng s·ªë, k l√† s·ªë nguy√™n d∆∞∆°ng kh√°c kh√¥ng. T√¨m kh·∫≥ng ƒë·ªãnh sai.", a: "$lim_{x\\rightarrow+\\infty}x^{k}=+\\infty$", b: "$lim_{x\\rightarrow-\\infty}x^{k}=-\\infty$", c: "$lim_{x\\rightarrow x_{0}}x=x_{0}$", d: "$lim_{x\\rightarrow x_{0}}c=c$", correct: "b", explain: "N·∫øu k l√† s·ªë ch·∫µn (v√≠ d·ª• $x^2$) th√¨ khi $x \\to -\\infty$, $x^k \\to +\\infty$. Do ƒë√≥ kh·∫≥ng ƒë·ªãnh B kh√¥ng ƒë√∫ng cho m·ªçi k." },
            { q: "Cho h√¨nh ch√≥p S.ABCD, ƒë√°y ABCD l√† h√¨nh b√¨nh h√†nh ABCD t√¢m O. Giao tuy·∫øn c·ªßa hai m·∫∑t ph·∫≥ng SAC v√† SAD l√†:", a: "SO", b: "SD", c: "SA", d: "SB", correct: "c", explain: "ƒêi·ªÉm chung th·ª© nh·∫•t: S.<br>ƒêi·ªÉm chung th·ª© hai: A (v√¨ A thu·ªôc c·∫£ SAC v√† SAD).<br>V·∫≠y giao tuy·∫øn l√† ƒë∆∞·ªùng th·∫≥ng SA." },
            { q: "Gi√° tr·ªã ƒë·∫°i di·ªán c·ªßa nh√≥m [58;60) l√†:", a: "58", b: "59", c: "54", d: "60", correct: "b", explain: "Gi√° tr·ªã ƒë·∫°i di·ªán = (ƒê·∫ßu m√∫t tr√°i + ƒê·∫ßu m√∫t ph·∫£i) / 2 = (58 + 60) / 2 = 59." },
            { q: "T√¨m t·∫•t c·∫£ c√°c nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh $sin(x+\\frac{\\pi}{6})=1.$", a: "$x=\\frac{\\pi}{3}+k\\pi(k\\in\\mathbb{Z})$", b: "$x=-\\frac{\\pi}{6}+k2\\pi(k\\in\\mathbb{Z})$", c: "$x=\\frac{\\pi}{3}+k2\\pi(k\\in\\mathbb{Z})$", d: "$x=\\frac{5\\pi}{6}+k2\\pi(k\\in\\mathbb{Z})$", correct: "c", explain: "Ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c ƒë·∫∑c bi·ªát: $sin u = 1 \\Leftrightarrow u = \\frac{\\pi}{2} + k2\\pi$.<br>$x + \\frac{\\pi}{6} = \\frac{\\pi}{2} + k2\\pi$<br>$x = \\frac{\\pi}{2} - \\frac{\\pi}{6} + k2\\pi = \\frac{\\pi}{3} + k2\\pi$." },
            { q: "Cho h√¨nh ch√≥p t·ª© gi√°c S.ABCD c√≥ ƒë√°y ABCD l√† h√¨nh b√¨nh h√†nh. C·∫∑p ƒë∆∞·ªùng th·∫≥ng n√†o d∆∞·ªõi ƒë√¢y song song v·ªõi nhau?", a: "SA v√† BC", b: "SB v√† SC", c: "AC v√† BD", d: "AB v√† CD", correct: "d", explain: "V√¨ ABCD l√† h√¨nh b√¨nh h√†nh n√™n c√°c c·∫∑p c·∫°nh ƒë·ªëi song song: AB // CD v√† AD // BC." },
            { q: "Cho d√£y s·ªë $(u_n)$ v·ªõi $u_{n}=2n-1$. D√£y s·ªë $(u_n)$ l√† d√£y s·ªë:", a: "Gi·∫£m", b: "B·ªã ch·∫∑n d∆∞·ªõi b·ªüi 2", c: "B·ªã ch·∫∑n tr√™n b·ªüi 1", d: "TƒÉng", correct: "d", explain: "X√©t hi·ªáu $u_{n+1} - u_n = [2(n+1)-1] - (2n-1) = 2 > 0$.<br>D√£y s·ªë tƒÉng." },
            { q: "Cho $(u_n)$ l√† c·∫•p s·ªë c·ªông bi·∫øt $u_{3}+u_{13}=80$. T·ªïng 15 s·ªë h·∫°ng ƒë·∫ßu c·ªßa c·∫•p s·ªë c·ªông ƒë√≥ b·∫±ng:", a: "800", b: "600", c: "570", d: "630", correct: "b", explain: "Ta c√≥ $u_3 + u_{13} = (u_1+2d) + (u_1+12d) = 2u_1 + 14d$.<br>T·ªïng $S_{15} = \\frac{15}{2}(2u_1 + 14d)$.<br>Thay th·∫ø: $S_{15} = \\frac{15}{2}(80) = 15 . 40 = 600$." },
            { q: "Cho c·∫•p s·ªë nh√¢n $(u_{n})$ c√≥ t·ªïng n s·ªë h·∫°ng ƒë·∫ßu ti√™n l√† $S_{n}=5^{n}-1$ v·ªõi $n=1,2,...$. T√¨m s·ªë h·∫°ng ƒë·∫ßu $u_1$ v√† c√¥ng b·ªôi q c·ªßa c·∫•p s·ªë nh√¢n ƒë√≥?", a: "$u_{1}=5, q=4$", b: "$u_{1}=5, q=6$", c: "$u_{1}=4, q=5$", d: "$u_{1}=6, q=5$", correct: "c", explain: "$u_1 = S_1 = 5^1 - 1 = 4$.<br>$S_2 = u_1 + u_2 = 5^2 - 1 = 24$.<br>Suy ra $u_2 = 24 - 4 = 20$.<br>C√¥ng b·ªôi $q = u_2 / u_1 = 20 / 4 = 5$." },
            { q: "M·ªôt nh√≥m 11 h·ªçc sinh tham gia m·ªôt k·ª≥ thi. S·ªë ƒëi·ªÉm thi ƒë∆∞·ª£c s·∫Øp x·∫øp t·ª´ th·∫•p ƒë·∫øn cao: 0;0;3;6;6;7;7;8;8;8;9. T√¨m s·ªë trung b√¨nh c·ªßa m·∫´u s·ªë li·ªáu (t√≠nh ch√≠nh x√°c ƒë·∫øn h√†ng ph·∫ßn trƒÉm).", a: "5", b: "5,54", c: "6", d: "5,64", correct: "d", explain: "T·ªïng ƒëi·ªÉm = 0+0+3+6+6+7+7+8+8+8+9 = 62.<br>Trung b√¨nh = 62 / 11 $\\approx$ 5,6363...<br>L√†m tr√≤n 5,64." },
            { q: "Trong c√°c kh·∫≥ng ƒë·ªãnh sau kh·∫≥ng ƒë·ªãnh n√†o sai?", a: "N·∫øu m·ªôt ƒë∆∞·ªùng th·∫≥ng song song v·ªõi m·ªôt trong hai m·∫∑t ph·∫≥ng song song th√¨ n√≥ song song v·ªõi m·∫∑t ph·∫≥ng c√≤n l·∫°i.", b: "N·∫øu m·ªôt ƒë∆∞·ªùng th·∫≥ng c·∫Øt m·ªôt trong hai m·∫∑t ph·∫≥ng song song th√¨ n√≥ c·∫Øt m·∫∑t ph·∫≥ng c√≤n l·∫°i.", c: "N·∫øu hai ƒë∆∞·ªùng th·∫≥ng song song th√¨ ch√∫ng c√πng n·∫±m tr√™n m·ªôt m·∫∑t ph·∫≥ng.", d: "N·∫øu hai m·∫∑t ph·∫≥ng ph√¢n bi·ªát c√πng song song v·ªõi m·ªôt m·∫∑t ph·∫≥ng th√¨ ch√∫ng song song v·ªõi nhau.", correct: "a", explain: "T∆∞∆°ng t·ª± c√¢u tr√™n, ƒë∆∞·ªùng th·∫≥ng ƒë√≥ c√≥ th·ªÉ n·∫±m trong m·∫∑t ph·∫≥ng c√≤n l·∫°i." },
            { q: "Cho h√¨nh ch√≥p t·ª© gi√°c S.ABCD. Giao tuy·∫øn c·ªßa hai m·∫∑t ph·∫≥ng (SAB) v√† (SBC) l√†:", a: "SA", b: "SB", c: "SC", d: "AC", correct: "b", explain: "S l√† ƒëi·ªÉm chung th·ª© nh·∫•t.<br>B l√† ƒëi·ªÉm chung th·ª© hai.<br>Giao tuy·∫øn l√† ƒë∆∞·ªùng th·∫≥ng n·ªëi S v√† B." },
            { q: "K·∫øt qu·∫£ c·ªßa gi·ªõi h·∫°n $lim(\\frac{1}{2})^{n}$ b·∫±ng:", a: "0", b: "$+\\infty$", c: "1/2", d: "1/5", correct: "a", explain: "Gi·ªõi h·∫°n c·ªßa $q^n$ b·∫±ng 0 n·∫øu $|q| < 1$.<br>·ªû ƒë√¢y $q = 1/2$, th·ªèa m√£n ƒëi·ªÅu ki·ªán, n√™n gi·ªõi h·∫°n b·∫±ng 0." },
            { q: "T√≠nh $lim_{x\\rightarrow1}\\frac{x^{2}+3x+2}{-2x^{2}+x+3}$ b·∫±ng:", a: "$-\\frac{1}{2}$", b: "$\\frac{2}{3}$", c: "3", d: "$\\frac{1}{2}$", correct: "c", explain: "Thay x=1 v√†o:<br>T·ª≠: $1+3+2=6$.<br>M·∫´u: $-2+1+3=2$.<br>K·∫øt qu·∫£: 3." },
            { q: "Ph∆∞∆°ng tr√¨nh $tan~x=\\sqrt{3}$ c√≥ t·∫≠p nghi·ªám l√†:", a: "$\\{\\frac{\\pi}{3}+k2\\pi,k\\in\\mathbb{Z}\\}$", b: "$\\emptyset$", c: "$\\{\\frac{\\pi}{3}+k\\pi,k\\in\\mathbb{Z}\\}$", d: "$\\{\\frac{\\pi}{6}+k\\pi,k\\in\\mathbb{Z}\\}$", correct: "c", explain: "$tan x = tan(\\frac{\\pi}{3}) \\Rightarrow x = \\frac{\\pi}{3} + k\\pi$." },
            { q: "M·ªánh ƒë·ªÅ n√†o d∆∞·ªõi ƒë√¢y ƒê√öNG?", a: "Hai ƒë∆∞·ªùng th·∫≥ng kh√¥ng c√≥ ƒëi·ªÉm chung th√¨ ch√©o nhau.", b: "Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát kh√¥ng song song th√¨ ch√©o nhau.", c: "Hai ƒë∆∞·ªùng th·∫≥ng n·∫±m tr√™n hai m·∫∑t ph·∫≥ng ph√¢n bi·ªát th√¨ ch√©o nhau.", d: "Hai ƒë∆∞·ªùng th·∫≥ng song song th√¨ kh√¥ng c√≥ ƒëi·ªÉm chung.", correct: "d", explain: "ƒê·ªãnh nghƒ©a: Hai ƒë∆∞·ªùng th·∫≥ng song song l√† hai ƒë∆∞·ªùng th·∫≥ng c√πng n·∫±m trong m·ªôt m·∫∑t ph·∫≥ng v√† kh√¥ng c√≥ ƒëi·ªÉm chung." },
            { q: "V·ªõi $n\\in\\mathbb{N}^{*}$, cho d√£y s·ªë $(u_{n})$ x√°c ƒë·ªãnh b·ªüi h·ªá th·ª©c truy h·ªìi $u_{1}=2$, $u_{n+1}=2u_{n}+3$. Gi√° tr·ªã c·ªßa s·ªë h·∫°ng th·ª© 4 b·∫±ng:", a: "37", b: "17", c: "7", d: "77", correct: "a", explain: "$u_1 = 2$<br>$u_2 = 2(2) + 3 = 7$<br>$u_3 = 2(7) + 3 = 17$<br>$u_4 = 2(17) + 3 = 37$." },
            { q: "Cho c·∫•p s·ªë c·ªông $(u_{n})$ th·ªèa m√£n $u_{1}=4$, $u_{3}=10$. C√¥ng sai c·ªßa c·∫•p s·ªë c·ªông b·∫±ng:", a: "6", b: "-6", c: "3", d: "-3", correct: "c", explain: "$u_3 = u_1 + 2d \\Rightarrow 10 = 4 + 2d \\Rightarrow 2d = 6 \\Rightarrow d = 3$." },
            { q: "Cho c·∫•p s·ªë nh√¢n $(u_{n})$ v·ªõi c√¥ng b·ªôi $q\\ne1$. ƒê·∫∑t $S_{n}=u_{1}+u_{2}+...+u_{n}$. Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒë√∫ng?", a: "$S_{n}=\\frac{u_{1}(1-q^{n})}{1-q}$", b: "$S_{n}=\\frac{u_{1}(1-q^{n-1})}{1-q}$", c: "$S_{n}=u_{1}(1-q^{n})$", d: "$S_{n}=\\frac{u_{1}(1-q)}{1-q^{n}}$", correct: "a", explain: "ƒê√¢y l√† c√¥ng th·ª©c chu·∫©n trong s√°ch gi√°o khoa cho t·ªïng n s·ªë h·∫°ng ƒë·∫ßu c·ªßa CSN." },
            { 
                q: "ƒêi·ªÅu tra v·ªÅ s·ªë ti·ªÅn mua ƒë·ªì d√πng h·ªçc t·∫≠p trong m·ªôt th√°ng c·ªßa 40 h·ªçc sinh, ta c√≥ m·∫´u s·ªë li·ªáu nh∆∞ sau (ƒë∆°n v·ªã: ngh√¨n ƒë·ªìng):<div class='overflow-x-auto'><table class='w-full'><tr><th>Gi√° tr·ªã (x)</th><td>[10; 15)</td><td>[15; 20)</td><td>[20; 25)</td><td>[25;30)</td><td>[30; 35)</td><td>[35; 40)</td></tr><tr><th>T·∫ßn s·ªë (n)</th><td>2</td><td>5</td><td>15</td><td>8</td><td>9</td><td>1</td></tr></table></div>S·ªë trung b√¨nh c·ªßa m·∫´u s·ªë li·ªáu l√†:", 
                a: "22,5", b: "25", c: "25,5", d: "27", correct: "b", explain: "Gi√° tr·ªã ƒë·∫°i di·ªán: 12.5, 17.5, 22.5, 27.5, 32.5, 37.5.<br>T·ªïng = 2(12.5) + 5(17.5) + 15(22.5) + 8(27.5) + 9(32.5) + 1(37.5) = 25 + 87.5 + 337.5 + 220 + 292.5 + 37.5 = 1000.<br>Trung b√¨nh = 1000 / 40 = 25." 
            },
            { q: "M·ªôt h√¨nh ch√≥p c√≥ ƒë√°y l√† ng≈© gi√°c c√≥ s·ªë m·∫∑t v√† s·ªë c·∫°nh l√†?", a: "5 m·∫∑t, 5 c·∫°nh.", b: "6 m·∫∑t, 5 c·∫°nh.", c: "6 m·∫∑t, 10 c·∫°nh.", d: "5 m·∫∑t, 10 c·∫°nh.", correct: "c", explain: "ƒê√°y ng≈© gi√°c (5 c·∫°nh).<br>S·ªë m·∫∑t = 1 m·∫∑t ƒë√°y + 5 m·∫∑t b√™n = 6 m·∫∑t.<br>S·ªë c·∫°nh = 5 c·∫°nh ƒë√°y + 5 c·∫°nh b√™n = 10 c·∫°nh." },
            { q: "Cho h√¨nh ch√≥p S.ABCD. G·ªçi M v√† N l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa SA v√† SC. Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒë√∫ng?", a: "$MN//(ABCD)$", b: "$MN//(SAB)$", c: "$MN//(SCD)$", d: "$MN//(SBC)$", correct: "a", explain: "MN l√† ƒë∆∞·ªùng trung b√¨nh tam gi√°c SAC => MN // AC.<br>M√† AC n·∫±m trong m·∫∑t ƒë√°y (ABCD).<br>Suy ra MN // (ABCD)." },
            { q: "Cho m·∫∑t ph·∫≥ng (R) c·∫Øt hai m·∫∑t ph·∫≥ng song song $(P);(\\mathcal{Q})$ theo hai giao tuy·∫øn a, b. M·ªánh ƒë·ªÅ n√†o sau ƒë√¢y ƒë√∫ng?", a: "$a\\perp b$", b: "$a//b$", c: "$a~c\\tilde{a}t~b$", d: "a ch√©o b", correct: "b", explain: "ƒê·ªãnh l√Ω: N·∫øu hai m·∫∑t ph·∫≥ng song song b·ªã c·∫Øt b·ªüi m·ªôt m·∫∑t ph·∫≥ng th·ª© ba th√¨ hai giao tuy·∫øn song song v·ªõi nhau." },
            { q: "D√£y s·ªë n√†o sau ƒë√¢y c√≥ gi·ªõi h·∫°n b·∫±ng 0?", a: "$(\\frac{3}{2})^{n}$", b: "$(-\\frac{5}{4})^{n}$", c: "$(\\frac{2}{3})^{n}$", d: "$(-\\frac{4}{3})^{n}$", correct: "c", explain: "Gi·ªõi h·∫°n $q^n = 0$ khi $|q| < 1$.<br>Ch·ªâ c√≥ ƒë√°p √°n C ($2/3 < 1$) th·ªèa m√£n." },
            { q: "N·∫øu h√†m s·ªë $f(x)$ th·ªèa m√£n $lim_{x\\rightarrow1}f(x)=3$ th√¨ $lim_{x\\rightarrow1}3f(x)$ b·∫±ng:", a: "3", b: "-3", c: "9", d: "6", correct: "c", explain: "Quy t·∫Øc gi·ªõi h·∫°n: $3 \\times 3 = 9$." },
            { q: "Gi·∫£i ph∆∞∆°ng tr√¨nh $sin(\\frac{2x}{3}-\\frac{\\pi}{3})=0$", a: "$x=k\\pi(k\\in\\mathbb{Z})$", b: "$x=\\frac{2\\pi}{3}+\\frac{k3\\pi}{2}(k\\in\\mathbb{Z})$", c: "$x=\\frac{\\pi}{3}+k\\pi(k\\in\\mathbb{Z})$", d: "$x=\\frac{\\pi}{2}+\\frac{k3\\pi}{2}(k\\in\\mathbb{Z})$", correct: "d", explain: "$\\frac{2x}{3} - \\frac{\\pi}{3} = k\\pi$<br>$\\frac{2x}{3} = \\frac{\\pi}{3} + k\\pi$<br>Nh√¢n 3/2 hai v·∫ø: $x = \\frac{\\pi}{2} + \\frac{k3\\pi}{2}$." },
            { q: "Cho d√£y s·ªë $u_{n}$, bi·∫øt $u_{n}=\\frac{n}{2^{n}}$. Ch·ªçn ƒë√°p √°n ƒë√∫ng.", a: "$u_{4}=\\frac{1}{4}$", b: "$u_{5}=\\frac{1}{16}$", c: "$u_{5}=\\frac{1}{32}$", d: "$u_{3}=\\frac{1}{8}$", correct: "a", explain: "$u_4 = \\frac{4}{2^4} = \\frac{4}{16} = \\frac{1}{4}$." },
            { q: "Gi·ªõi h·∫°n $lim\\frac{3n-7}{2n^{2}+3n-1}$ b·∫±ng:", a: "$\\frac{3}{2}$", b: "3", c: "0", d: "$\\frac{-3}{2}$", correct: "c", explain: "B·∫≠c t·ª≠ l√† 1, b·∫≠c m·∫´u l√† 2.<br>B·∫≠c t·ª≠ < B·∫≠c m·∫´u => Gi·ªõi h·∫°n b·∫±ng 0." }
        ];

        // 2. NG√ÇN H√ÄNG ƒê√öNG/SAI (True/False)
        const bankTF = [
            {
                q: "Cho ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c $sin(3x+\\frac{\\pi}{3})=-\\frac{\\sqrt{3}}{2}$",
                items: [
                    { id: "a", text: "Ph∆∞∆°ng tr√¨nh c√≥ nghi·ªám $\\begin{cases}x=-\\frac{\\pi}{9}+k\\frac{2\\pi}{3}\\\\ x=\\frac{\\pi}{3}+k\\frac{2\\pi}{3}\\end{cases}$", correct: true },
                    { id: "b", text: "Ph∆∞∆°ng tr√¨nh c√≥ nghi·ªám √¢m l·ªõn nh·∫•t b·∫±ng $-\\frac{2\\pi}{9}$", correct: true },
                    { id: "c", text: "Tr√™n kho·∫£ng $(0;\\frac{\\pi}{2})$ ph∆∞∆°ng tr√¨nh ƒë√£ cho c√≥ 3 nghi·ªám", correct: false },
                    { id: "d", text: "T·ªïng c√°c nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh trong kho·∫£ng $(0;\\frac{\\pi}{2})$ b·∫±ng $\\frac{7\\pi}{9}$", correct: true }
                ],
                explain: "a) Gi·∫£i PT c∆° b·∫£n: $3x+\\pi/3 = -\\pi/3 + k2\\pi$ ho·∫∑c $4\\pi/3 + k2\\pi$. Chia 3 ra h·ªç nghi·ªám nh∆∞ ƒë·ªÅ b√†i -> ƒê√öNG.<br>b) X√©t k=0, x=-pi/9 (√¢m). X√©t ho 2: k=-1 -> x = pi/3 - 2pi/3 = -pi/3. So s√°nh -pi/9 v√† -2pi/9 (t·ª´ h·ªç 1 khi k=0? Kh√¥ng, k=0 ho 1 l√† -pi/9. ƒê·ªÅ n√≥i -2pi/9? Ki·ªÉm tra l·∫°i: $3x = -2pi/3$ -> $x = -2pi/9$. V·∫≠y nghi·ªám n√†y ƒë√∫ng. So s√°nh -2pi/9 v√† -pi/3: -0.22 vs -0.33. -2pi/9 l·ªõn h∆°n. -> ƒê√öNG.<br>c) Kho·∫£ng (0; pi/2). H·ªç 1: k=1 -> -pi/9+2pi/3 = 5pi/9 > pi/2 (Sai). H·ªç 2: k=0 -> pi/3 (nh·∫≠n). Ch·ªâ c√≥ 1 nghi·ªám -> SAI.<br>d) Ch·ªâ c√≥ nghi·ªám pi/3. T·ªïng = pi/3. ƒê·ªÅ n√≥i 7pi/9 -> SAI (d·ª±a theo ph√¢n t√≠ch tr√™n). *L∆∞u √Ω: ƒê√°p √°n game ƒëang ƒë·ªÉ True cho d, c·∫ßn ki·ªÉm tra k·ªπ l·∫°i logic c·ªßa ƒë·ªÅ b√†i g·ªëc n·∫øu c√≥.*"
            },
            {
                q: "Cho d√£y s·ªë $(u_{n})$ v·ªõi $u_{n}=\\sqrt{n^{2}+an+5}-\\sqrt{n^{2}+1}$ , trong ƒë√≥ a l√† tham s·ªë th·ª±c.",
                items: [
                    { id: "a", text: "Khi $a=2$ th√¨ $limu_{n}=1$.", correct: true },
                    { id: "b", text: "Khi $a=3$ th√¨ $lim~u_{n}=\\frac{1}{2}$", correct: false },
                    { id: "c", text: "Khi $a=-3$ th√¨ $lim~u_{n}=-\\frac{3}{2}$", correct: true },
                    { id: "d", text: "Khi $a=-2$ th√¨ $limu_{n}=-1$", correct: true }
                ],
                explain: "Nh√¢n li√™n h·ª£p: Lim = a/2.<br>a) a=2 -> Lim=1 (ƒê√∫ng).<br>b) a=3 -> Lim=1.5 (Sai).<br>c) a=-3 -> Lim=-1.5 (ƒê√∫ng).<br>d) a=-2 -> Lim=-1 (ƒê√∫ng)."
            },
            {
                q: "C√°c m·ªánh ƒë·ªÅ sau ƒë√∫ng hay sai?",
                items: [
                    { id: "a", text: "$lim_{x\\rightarrow-\\infty}(\\sqrt{x^{2}-x+1}+x-2)=\\frac{-3}{2}$", correct: true },
                    { id: "b", text: "$lim_{x\\rightarrow+\\infty}(\\sqrt{x^{2}-x+1}+x-2)=+\\infty$", correct: true },
                    { id: "c", text: "$lim_{x\\rightarrow-1^{-}}\\frac{3x+2}{x+1}=+\\infty$", correct: true },
                    { id: "d", text: "$lim_{x\\rightarrow-1^{+}}\\frac{3x+2}{x+1}=-\\infty$", correct: true }
                ],
                explain: "a) Nh√¢n li√™n h·ª£p cho x->-inf (d·∫°ng v√¥ ƒë·ªãnh inf-inf). K·∫øt qu·∫£ -1/2 - 2 = -2.5? Khoan, li√™n h·ª£p ph·∫ßn cƒÉn+x -> -1/2. Tr·ª´ 2 n·ªØa -> -2.5. ƒê√°p √°n ƒë·ªÅ l√† -1.5? Ki·ªÉm tra l·∫°i: (x^2-x+1 - x^2)/(sqrt-x) = (-x)/(-2x) = 1/2. 1/2 - 2 = -1.5. ƒê√öNG.<br>b) +inf + inf = +inf. ƒê√öNG.<br>c) x->-1-, m·∫´u √¢m, t·ª≠ -1. -/- = +. ƒê√öNG.<br>d) x->-1+, m·∫´u d∆∞∆°ng, t·ª≠ -1. -/+ = -. ƒê√öNG."
            },
            {
                q: "Cho h√¨nh ch√≥p S.ABCD c√≥ ƒë√°y ABCD l√† h√¨nh thang (AD l√† ƒë√°y l·ªõn, BC l√† ƒë√°y nh·ªè). G·ªçi E, F l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa SA v√† SD. K l√† giao ƒëi·ªÉm c·ªßa c√°c ƒë∆∞·ªùng th·∫≥ng AB v√† CD. Khi ƒë√≥:",
                items: [
                    { id: "a", text: "Giao ƒëi·ªÉm M c·ªßa ƒë∆∞·ªùng th·∫≥ng SB v√† m·∫∑t ph·∫≥ng (CDE) l√† ƒëi·ªÉm thu·ªôc ƒë∆∞·ªùng th·∫≥ng KE", correct: true },
                    { id: "b", text: "ƒê∆∞·ªùng th·∫≥ng SC c·∫Øt m·∫∑t ph·∫≥ng (EFM) t·∫°i N. T·ª© gi√°c EFNM l√† h√¨nh b√¨nh h√†nh", correct: false },
                    { id: "c", text: "C√°c ƒë∆∞·ªùng th·∫≥ng AM, DN, SK c√πng ƒëi qua m·ªôt ƒëi·ªÉm", correct: true },
                    { id: "d", text: "Cho bi·∫øt $AD=2BC$. T·ªâ s·ªë di·ªán t√≠ch c·ªßa hai tam gi√°c KMN v√† KEF b·∫±ng $\\frac{S_{\\Delta KMN}}{S_{\\Delta KEF}}=\\frac{2}{3}$", correct: false }
                ],
                explain: "a) (SAB) giao (CDE). K thu·ªôc AB, CD. E thu·ªôc SA. Giao tuy·∫øn KE. M l√† giao SB v√† KE. ƒê√öNG.<br>b) Thi·∫øt di·ªán l√† h√¨nh thang, kh√¥ng ch·∫Øc l√† hbh.<br>c) ƒê·ªìng quy t·∫°i S (ho·∫∑c giao tuy·∫øn chung). ƒê√öNG.<br>d) T√≠nh to√°n t·ª∑ s·ªë di·ªán t√≠ch d·ª±a tr√™n Thales. K·∫øt qu·∫£ th∆∞·ªùng ph·ª©c t·∫°p h∆°n."
            },
            {
                q: "Cho $u_{n}=\\frac{7^{n}+2^{2n-1}+3^{n+1}}{7^{n+1}+5^{n-1}}$. Bi·∫øt $limu_n = \\frac{a}{b}$ (v·ªõi a, $b\\in\\mathbb{Z};\\frac{a}{b}$ t·ªëi gi·∫£n). Khi ƒë√≥:",
                items: [
                    { id: "a", text: "$a+b=8$", correct: true }, 
                    { id: "b", text: "$a-b=-7$", correct: false }, 
                    { id: "c", text: "B·ªô ba s·ªë a; b; 13 t·∫°o th√†nh m·ªôt c·∫•p s·ªë c·ªông c√≥ c√¥ng sai $d=7$", correct: false },
                    { id: "d", text: "B·ªô ba s·ªë a; b; 49 t·∫°o th√†nh m·ªôt c·∫•p s·ªë nh√¢n c√≥ c√¥ng b·ªôi $q=7$", correct: true } 
                ],
                explain: "Chia c·∫£ t·ª≠ v√† m·∫´u cho $7^{n+1}$.<br>T·ª≠ $\\approx 1/7$. M·∫´u $\\approx 1$.<br>Gi·ªõi h·∫°n = 1/7.<br>a=1, b=7.<br>a) 1+7=8 (ƒê).<br>d) 1, 7, 49 l√† CSN c√¥ng b·ªôi 7 (ƒê)."
            },
            {
                q: "Cho $L=lim_{x\\rightarrow-\\infty}(\\sqrt{x^{2}+ax+5}+x)$ Khi ƒë√≥:",
                items: [
                    { id: "a", text: "$L=5$ khi $a=-10$", correct: true }, 
                    { id: "b", text: "$L>0$ khi $a>0$", correct: false }, 
                    { id: "c", text: "$L<0$ khi $a>0$", correct: true }, 
                    { id: "d", text: "$L=-1$ th√¨ a l√† m·ªôt nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh $x^{2}-3x+2=0$", correct: true } 
                ],
                explain: "C√¥ng th·ª©c nhanh: $L = a/(-2) = -a/2$.<br>a) $a=-10 \\Rightarrow L=5$ (ƒê).<br>b,c) N·∫øu $a>0 \\Rightarrow L<0$ (b Sai, c ƒê√∫ng).<br>d) $L=-1 \\Rightarrow -a/2 = -1 \\Rightarrow a=2$. Thay v√†o pt: $4-6+2=0$ (ƒê)."
            },
             {
                q: "Cho t·ª© di·ªán ABCD, g·ªçi I v√† J l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa AD v√† AC,G l√† tr·ªçng t√¢m c·ªßa tam gi√°c BCD.",
                items: [
                    { id: "a", text: "$IJ//CD$", correct: true },
                    { id: "b", text: "Giao tuy·∫øn c·ªßa hai m·∫∑t ph·∫≥ng (GIJ) v√† (BCD) l√† ƒë∆∞·ªùng th·∫≥ng qua G v√† song song v·ªõi BC", correct: false }, 
                    { id: "c", text: "Cho bi·∫øt $CD=6$. Bi·∫øt (GIJ) c·∫Øt BC, BD l·∫ßn l∆∞·ª£t t·∫°i M v√† N. Khi ƒë√≥ $2IJ+3MN=17$", correct: false },
                    { id: "d", text: "Cho bi·∫øt $CD=6$. Bi·∫øt (GIJ) c·∫Øt BC, BD l·∫ßn l∆∞·ª£t t·∫°i M v√† N. Khi ƒë√≥ $3IJ+2MN=18$", correct: true }
                ],
                explain: "a) I, J trung ƒëi·ªÉm => IJ ƒë∆∞·ªùng trung b√¨nh => IJ // CD (ƒê).<br>b) Giao tuy·∫øn qua G v√† song song v·ªõi IJ (t·ª©c l√† song song CD), kh√¥ng ph·∫£i BC (S).<br>d) $IJ=CD/2=3$. MN qua G song song CD => $MN/CD=2/3$ (t√≠nh ch·∫•t tr·ªçng t√¢m) => $MN=4$.<br>Ki·ªÉm tra bi·ªÉu th·ª©c: $3(3) + 2(4) = 9+8=17$? ƒê·ªÅ b√†i n√≥i 18? C√≥ th·ªÉ nh·∫ßm l·∫´n s·ªë li·ªáu ho·∫∑c c√¥ng th·ª©c tr·ªçng t√¢m. N·∫øu theo t√≠nh to√°n MN=4 th√¨ 3(3)+2(4)=17. ƒê√°p √°n D trong game l√† True c√≥ th·ªÉ do l√†m tr√≤n ho·∫∑c ƒë·ªÅ g·ªëc kh√°c. Tuy nhi√™n, h∆∞·ªõng gi·∫£i l√† d√πng t·ªâ l·ªá Thales."
            },
            {
                q: "Cho ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c $cot~3x=-\\frac{1}{\\sqrt{3}}(^{*}).$ Khi ƒë√≥:",
                items: [
                    { id: "a", text: "Ph∆∞∆°ng tr√¨nh (*) t∆∞∆°ng ƒë∆∞∆°ng $cot~3x=cot(\\frac{-\\pi}{6})$", correct: false }, 
                    { id: "b", text: "Ph∆∞∆°ng tr√¨nh (*) c√≥ nghi·ªám $x=\\frac{\\pi}{9}+k\\frac{\\pi}{3}(k\\in\\mathbb{Z})$", correct: false },
                    { id: "c", text: "T·ªïng c√°c nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh trong kho·∫£ng $(-\\frac{\\pi}{2};0)$ b·∫±ng $\\frac{-5\\pi}{9}$", correct: true }, 
                    { id: "d", text: "Ph∆∞∆°ng tr√¨nh c√≥ nghi·ªám d∆∞∆°ng nh·ªè nh·∫•t b·∫±ng $\\frac{2\\pi}{9}$", correct: true }
                ],
                explain: "$-1/\\sqrt{3} = cot(2\\pi/3)$ ho·∫∑c $cot(-\\pi/3)$.<br>a) $-\\pi/6$ sai v√¨ cot(-pi/6) = -sqrt(3).<br>Gi·∫£i $3x = 2\\pi/3 + k\\pi \\Rightarrow x = 2\\pi/9 + k\\pi/3$.<br>c) Nghi·ªám √¢m: k=-1 -> -pi/9. k=-2 -> -4pi/9. T·ªïng = -5pi/9 (ƒê).<br>d) Nghi·ªám d∆∞∆°ng nh·ªè nh·∫•t: k=0 -> 2pi/9 (ƒê)."
            },
             {
                q: "Bi·∫øt gi·ªõi h·∫°n $lim\\frac{2n+1}{-3n+2}=a$. Khi ƒë√≥:",
                items: [
                    { id: "a", text: "Gi√° tr·ªã a l·ªõn h∆°n 0.", correct: false }, 
                    { id: "b", text: "Ba s·ªë $-\\frac{5}{3};a;\\frac{1}{3}$ t·∫°o th√†nh m·ªôt c·∫•p s·ªë c·ªông v·ªõi c√¥ng sai b·∫±ng 2", correct: false }, 
                    { id: "c", text: "Tr√™n kho·∫£ng $(-\\pi;\\pi)$ ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c $sin~x=a$ c√≥ 3 nghi·ªám", correct: false }, 
                    { id: "d", text: "Cho c·∫•p s·ªë nh√¢n $(u_{n})$ v·ªõi c√¥ng b·ªôi $q=3$ v√† $u_{1}=a$, th√¨ $u_{3}=-6$", correct: true } 
                ],
                explain: "a = -2/3.<br>a) -2/3 < 0 (S).<br>b) CSC? -5/3, -2/3, 1/3. C√¥ng sai d=1 (S).<br>c) sin x = -2/3. K·∫ª ƒë∆∞·ªùng th·∫≥ng y=-0.66. C·∫Øt ƒë·ªì th·ªã tr√™n (-pi, pi) t·∫°i 2 ƒëi·ªÉm (h·ªá s·ªë g√≥c ph·∫ßn t∆∞ III v√† IV). (S).<br>d) $u_3 = u_1.q^2 = (-2/3).9 = -6$ (ƒê)."
            },
            {
                q: "Cho ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c $sin~x=-\\frac{1}{2}$ khi ƒë√≥:",
                items: [
                    { id: "a", text: "Ph∆∞∆°ng tr√¨nh t∆∞∆°ng ƒë∆∞∆°ng $sin~x=sin(\\frac{\\pi}{6})$", correct: false }, 
                    { id: "b", text: "Ph∆∞∆°ng tr√¨nh c√≥ nghi·ªám l√†: $x=-\\frac{\\pi}{6}+k2\\pi;$ $x=\\frac{7\\pi}{6}+k2\\pi(k\\in\\mathbb{Z})$ .", correct: true },
                    { id: "c", text: "Ph∆∞∆°ng tr√¨nh c√≥ nghi·ªám √¢m l·ªõn nh·∫•t b·∫±ng $-\\frac{\\pi}{3}$", correct: false }, 
                    { id: "d", text: "S·ªë nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh trong kho·∫£ng $(-\\pi;\\pi)$ l√† ba nghi·ªám", correct: false } 
                ],
                explain: "sin x = -1/2 = sin(-pi/6).<br>b) Nghi·ªám: -pi/6 + k2pi v√† pi - (-pi/6) = 7pi/6 + k2pi. (ƒê).<br>c) √Çm l·ªõn nh·∫•t l√† -pi/6 (S).<br>d) Trong (-pi; pi): -pi/6 v√† -5pi/6. C√≥ 2 nghi·ªám (S)."
            },
            {
                q: "Cho gi·ªõi h·∫°n $L=lim\\sqrt{3+\\frac{an^{2}-1}{3+n^{2}}-\\frac{1}{2^{n}}}.$ Khi ƒë√≥ :",
                items: [
                    { id: "a", text: "$L=2$ khi $a=1$", correct: true }, 
                    { id: "b", text: "$L=3$ khi $a=3$", correct: false }, 
                    { id: "c", text: "$L>3$ khi $a>6$", correct: true }, 
                    { id: "d", text: "C√≥ 3 gi√° tr·ªã nguy√™n c·ªßa a thu·ªôc (0;20) sao cho L l√† m·ªôt s·ªë nguy√™n.", correct: true }
                ],
                explain: "L = cƒÉn(3+a).<br>a) a=1 -> L=2 (ƒê).<br>b) a=3 -> L=cƒÉn 6 != 3 (S).<br>c) cƒÉn(3+a) > 3 => 3+a > 9 => a > 6 (ƒê).<br>d) L nguy√™n => 3+a l√† s·ªë ch√≠nh ph∆∞∆°ng. 3 < 3+a < 23. S·ªë CP: 4, 9, 16. a = 1, 6, 13. C√≥ 3 gi√° tr·ªã (ƒê)."
            },
            {
                q: "C√°c m·ªánh ƒë·ªÅ sau ƒë√∫ng hay sai?",
                items: [
                    { id: "a", text: "$lim_{x\\rightarrow-\\infty}(\\sqrt{x^{2}+x}-x)=0$", correct: false }, 
                    { id: "b", text: "$lim_{x\\rightarrow+\\infty}(\\sqrt{x^{2}+x}-2x)=+\\infty$", correct: false }, 
                    { id: "c", text: "$lim_{x\\rightarrow+\\infty}(\\sqrt{x^{2}+x}-x)=\\frac{1}{2}$", correct: true },
                    { id: "d", text: "$lim_{x\\rightarrow-\\infty}(\\sqrt{x^{2}+x}-2x)=-\\infty$", correct: false } 
                ],
                explain: "a) Thay -inf: +inf - (-inf) = +inf (S).<br>c) D·∫°ng v√¥ ƒë·ªãnh inf-inf. Nh√¢n li√™n h·ª£p: x / (sqrt+x) -> 1/2 (ƒê)."
            },
             {
                q: "Cho h√¨nh ch√≥p S.ABCD c√≥ ƒë√°y l√† h√¨nh b√¨nh h√†nh. ƒêi·ªÉm M thu·ªôc c·∫°nh SA, ƒëi·ªÉm E v√† F l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa AB v√† BC. Khi ƒë√≥:",
                items: [
                    { id: "a", text: "$EF//AC$", correct: true }, 
                    { id: "b", text: "Giao tuy·∫øn c·ªßa hai m·∫∑t ph·∫≥ng (SAB) v√† (SCD) l√† ƒë∆∞·ªùng th·∫≥ng qua S v√† song song v·ªõi AC.", correct: false }, 
                    { id: "c", text: "Giao tuy·∫øn c·ªßa hai m·∫∑t ph·∫≥ng (MBC) v√† (SAD) ƒë∆∞·ªùng th·∫≥ng qua M v√† song song v·ªõi BC.", correct: true }, 
                    { id: "d", text: "Giao tuy·∫øn c·ªßa hai m·∫∑t ph·∫≥ng (MEF) v√† (SAC) l√† ƒë∆∞·ªùng th·∫≥ng qua M v√† song song v·ªõi AC .", correct: true } 
                ],
                explain: "a) E, F trung ƒëi·ªÉm => EF ƒë∆∞·ªùng trung b√¨nh => EF // AC (ƒê).<br>b) Giao tuy·∫øn (SAB) v√† (SCD) song song v·ªõi AB v√† CD, kh√¥ng ph·∫£i AC (S).<br>c) BC // AD => Giao tuy·∫øn qua M // BC // AD (ƒê).<br>d) EF // AC => Giao tuy·∫øn qua M // EF // AC (ƒê)."
            },
            {
                q: "Cho ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c $sin(5x+\\frac{\\pi}{3})=cos(2x-\\frac{\\pi}{3})$ , , v·∫≠y:",
                items: [
                    { id: "a", text: "Ph∆∞∆°ng tr√¨nh ƒë√£ cho t∆∞∆°ng ƒë∆∞∆°ng v·ªõi ph∆∞∆°ng tr√¨nh $sin(5x+\\frac{\\pi}{3})=sin(\\frac{5\\pi}{6}-2x)$", correct: true },
                    { id: "b", text: "Nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh l√† $\\begin{cases}x=\\frac{\\pi}{14}+k\\frac{2\\pi}{7}\\\\ x=-\\frac{\\pi}{18}+k\\frac{2\\pi}{3}\\end{cases}$", correct: true },
                    { id: "c", text: "Tr√™n [0; œÄ] ph∆∞∆°ng tr√¨nh c√≥ 4 nghi·ªám", correct: false },
                    { id: "d", text: "T·ªïng c√°c nghi·ªám c·ªßa ph∆∞∆°ng tr√¨nh tr√™n [0; œÄ] b·∫±ng $\\frac{47\\pi}{18}$", correct: true }
                ],
                explain: "ƒê·ªïi cos th√†nh sin: cos(u) = sin(pi/2 - u). pi/2 - (2x - pi/3) = 5pi/6 - 2x. (a ƒê√∫ng).<br>Gi·∫£i ti·∫øp ra nghi·ªám (b ƒê√∫ng). Ki·ªÉm tra s·ªë nghi·ªám v√† t·ªïng (c, d)."
            },
            {
                q: "Bi·∫øt gi·ªõi h·∫°n $lim\\frac{5n^{3}-2n+1}{n-2n^{3}}=a$ Khi ƒë√≥:",
                items: [
                    { id: "a", text: "Gi√° tr·ªã a nh·ªè h∆°n 0.", correct: true }, 
                    { id: "b", text: "$x=a$ l√† tr·ª•c ƒë·ªëi x·ª©ng c·ªßa parabol (P): $y=x^{2}+5x+2$", correct: true }, 
                    { id: "c", text: "Ph∆∞∆°ng tr√¨nh l∆∞·ª£ng gi√°c $sin~x=a$ v√¥ nghi·ªám", correct: true }, 
                    { id: "d", text: "Cho c·∫•p s·ªë c·ªông $(u_{n})$ v·ªõi c√¥ng sai $d=3$ v√† $u_{1}=a$, th√¨ $u_{3}=6$", correct: false } 
                ],
                explain: "a = 5/(-2) = -2.5.<br>a) -2.5 < 0 (ƒê).<br>b) Tr·ª•c ƒë·ªëi x·ª©ng -b/2a = -5/2 = -2.5 (ƒê).<br>c) sin x = -2.5 <-1 (V√¥ nghi·ªám) (ƒê).<br>d) $u_3 = -2.5 + 2(3) = 3.5$ (S)."
            },
            {
                q: "T√¨m ƒë∆∞·ª£c c√°c gi·ªõi h·∫°n sau:",
                items: [
                    { id: "a", text: "$lim_{x\\rightarrow0}(-5x^{3}-4x+2)=2$", correct: true },
                    { id: "b", text: "$lim_{x\\rightarrow1}\\frac{2x-3x^{2}}{4x+1}=-\\frac{3}{4}$", correct: false }, 
                    { id: "c", text: "$lim_{x\\rightarrow5}\\frac{x^{2}+2x-15}{x+5}=+\\infty$", correct: false }, 
                    { id: "d", text: "$lim_{x\\rightarrow4}\\frac{x^{2}+3x-4}{x^{2}+4x}=\\frac{5}{4}$", correct: false } 
                ],
                explain: "a) Thay 0: 2 (ƒê).<br>b) Thay 1: (2-3)/5 = -1/5 (S).<br>c) Thay 5: 20/10 = 2 (S).<br>d) Thay 4: (16+12-4)/(16+16) = 24/32 = 3/4 (S)."
            },
            {
                q: "Cho h√¨nh ch√≥p S.ABCD. G·ªçi $A^{\\prime}$, $B^{\\prime}$ $C^{\\prime}$, $D^{\\prime}$ l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa c√°c c·∫°nh SA, SB, SC, SD. C√°c m·ªánh ƒë·ªÅ sau ƒë√∫ng hay sai?",
                items: [
                    { id: "a", text: "ƒë∆∞·ªùng th·∫≥ng AB song song v·ªõi $A^{\\prime}B^{\\prime}$", correct: true },
                    { id: "b", text: "ƒë∆∞·ªùng th·∫≥ng CD song song v·ªõi $A^{\\prime}B^{\\prime}$", correct: false }, 
                    { id: "c", text: "ƒë∆∞·ªùng th·∫≥ng $C^{\\prime}D^{\\prime}$ song song v·ªõi $A^{\\prime}B^{\\prime}$", correct: false },
                    { id: "d", text: "ƒë∆∞·ªùng th·∫≥ng SC song song v·ªõi $A^{\\prime}B^{\\prime}$", correct: false }
                ],
                explain: "a) ƒê∆∞·ªùng trung b√¨nh tam gi√°c SAB -> A'B' // AB (ƒê).<br>b) N·∫øu ƒë√°y ABCD t√πy √Ω th√¨ CD kh√¥ng song song AB -> CD kh√¥ng song song A'B' (S).<br>c) A'B' // AB, C'D' // CD. N·∫øu AB kh√¥ng song song CD th√¨ 2 ƒë∆∞·ªùng n√†y kh√¥ng song song (S)."
            }
        ];

        // 3. NG√ÇN H√ÄNG TR·∫¢ L·ªúI NG·∫ÆN (Short Answer)
        const bankShort = [
            { 
                q: "M·ªôt qu·∫£ b√≥ng cao su ƒë∆∞·ª£c th·∫£ t·ª´ ƒë·ªô cao 81m. M·ªói l·∫ßn ch·∫°m ƒë·∫•t qu·∫£ b√≥ng l·∫°i n·∫£y l√™n hai ph·∫ßn ba ƒë·ªô cao c·ªßa l·∫ßn r∆°i tr∆∞·ªõc. T·ªïng c√°c kho·∫£ng c√°ch r∆°i v√† n√†y c·ªßa qu·∫£ b√≥ng t·ª´ l√∫c th·∫£ b√≥ng cho ƒë·∫øn l√∫c b√≥ng kh√¥ng n√†y n·ªØa b·∫±ng bao nhi√™u (m√©t)?", 
                answers: ["405", "405m", "405 m"],
                explain: "Qu√£ng ƒë∆∞·ªùng g·ªìm: R∆°i 81m ban ƒë·∫ßu + 2 l·∫ßn (l√™n + xu·ªëng) c√°c qu√£ng ƒë∆∞·ªùng sau.<br>T·ªïng $S = 81 + 2 \\times (81 \\times \\frac{2}{3} + 81 \\times (\\frac{2}{3})^2 + ...)$<br>Ph·∫ßn trong ngo·∫∑c l√† CSN l√πi v√¥ h·∫°n $u_1=54, q=2/3$. T·ªïng ph·ª• = $54/(1-2/3) = 162$.<br>T·ªïng S = $81 + 2 \\times 162 = 405$."
            },
            { 
                q: "Cho t·ª© di·ªán ABCD c√≥ G l√† tr·ªçng t√¢m c·ªßa ABD v√† M l√† m·ªôt ƒëi·ªÉm tr√™n c·∫°nh BC sao cho $MB=x.MC$. T√¨m x ƒë·ªÉ ƒë∆∞·ªùng th·∫≥ng MG song song v·ªõi m·∫∑t ph·∫≥ng (ACD)", 
                answers: ["2", "x=2"],
                explain: "G·ªçi I l√† trung ƒëi·ªÉm AD. G tr·ªçng t√¢m n√™n $BG/BI = 2/3$.<br>ƒê·ªÉ $MG // (ACD)$, ta c·∫ßn $MG // CI$ (v√¨ $I \\in (ACD)$).<br>Trong tam gi√°c BCI, $MG // CI \\Rightarrow BM/BC = BG/BI = 2/3$.<br>$\\Rightarrow MB = 2/3 BC \\Rightarrow MC = 1/3 BC$.<br>V·∫≠y $MB/MC = (2/3)/(1/3) = 2$. $x=2$."
            },
            { 
                q: "T·∫°i m·ªôt nh√† m√°y, ng∆∞·ªùi ta ƒëo ƒë∆∞·ª£c r·∫±ng 80% l∆∞·ª£ng n∆∞·ªõc sau khi s·ª≠ d·ª•ng ƒë∆∞·ª£c x·ª≠ l√≠ v√† t√°i s·ª≠ d·ª•ng. V·ªõi $100m^{3}$ ban ƒë·∫ßu ƒë∆∞·ª£c s·ª≠ d·ª•ng l·∫ßn ƒë·∫ßu t·∫°i nh√† m√°y, khi qu√° tr√¨nh x·ª≠ l√≠ v√† t√°i s·ª≠ d·ª•ng l·∫∑p l·∫°i m√£i m√£i, nh√† m√°y s·ª≠ d·ª•ng ƒë∆∞·ª£c t·ªïng l∆∞·ª£ng n∆∞·ªõc l√† bao nhi√™u ($m^3$)?", 
                answers: ["500", "500m3", "500 m3"],
                explain: "ƒê√¢y l√† t·ªïng CSN l√πi v√¥ h·∫°n v·ªõi $u_1=100, q=0.8$.<br>$S = \\frac{u_1}{1-q} = \\frac{100}{1-0.8} = 500$."
            },
            {
                q: "T·∫°i m·ªôt c∆° s·ªü s·∫£n xu·∫•t n∆∞·ªõc tinh khi·∫øt, nh√¢n vi√™n ph·ª• tr√°ch s·∫£n xu·∫•t cho bi·∫øt, n·∫øu m·ªói ng√†y c∆° s·ªü n√†y s·∫£n xu·∫•t $x(m^{3})$ n∆∞·ªõc tinh khi·∫øt th√¨ ph·∫£i chi ph√≠ c√°c kho·∫£n sau: 3 tri·ªáu ƒë·ªìng ch√≠ ph√≠ c·ªë ƒë·ªãnh; 0,12 tri·ªáu ƒë·ªìng ch·ªâ ph√≠ b·∫£o d∆∞·ª°ng m√°y m√≥c cho m·ªói m√©t kh·ªëi s·∫£n ph·∫©m. G·ªçi $C(x)$ l√† chi ph√≠ s·∫£n su·∫•t $x(m^{3})$ s·∫£n ph·∫©m m·ªói ng√†y v√† $\\overline{C}(x)$ l√† chi ph√≠ trung b√¨nh m·ªói m√©t kh·ªëi s·∫£n ph·∫©m. Khi ƒë√≥ t√≠nh $lim_{x\\rightarrow+\\infty}\\overline{C}(x)$",
                answers: ["0.12", "0,12"],
                explain: "H√†m chi ph√≠ $C(x) = 3 + 0.12x$.<br>Chi ph√≠ trung b√¨nh $\\overline{C}(x) = C(x)/x = \\frac{3}{x} + 0.12$.<br>Khi $x \\to +\\infty$, $3/x \\to 0$.<br>Gi·ªõi h·∫°n b·∫±ng 0.12."
            },
            {
                q: "Cho hai s·ªë th·ª±c a,b th·ªèa m√£n $lim_{x\\rightarrow1}\\frac{ax^{2}+bx-2}{x-1}=3$. T√≠nh gi√° tr·ªã bi·ªÉu th·ª©c $S=a+\\frac{b}{4}$",
                answers: ["1.25", "1,25", "5/4"],
                explain: "ƒê·ªÉ gi·ªõi h·∫°n h·ªØu h·∫°n, t·ª≠ ph·∫£i b·∫±ng 0 t·∫°i x=1. $a+b-2=0 \\Rightarrow b=2-a$.<br>Thay v√†o limit: $(ax^2+(2-a)x-2)/(x-1) = (x-1)(ax+2)/(x-1) = ax+2$.<br>Khi $x \\to 1$: $a+2=3 \\Rightarrow a=1$.<br>Suy ra $b=1$.<br>$S = 1 + 1/4 = 1.25$."
            },
            {
                q: "Cho t·ª© di·ªán ABCD. C√°c ƒëi·ªÉm P, Q l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa AB v√† CD; ƒëi·ªÉm R n·∫±m tr√™n c·∫°nh BC sao cho $BR=2RC$. G·ªçi S l√† giao ƒëi·ªÉm c·ªßa $mp(PQR)$ v√† c·∫°nh AD. T√≠nh t·ªâ s·ªë $\\frac{SA}{SD}$",
                answers: ["2"],
                explain: "S·ª≠ d·ª•ng t√≠nh ch·∫•t t·ªâ s·ªë (Menelaus kh√¥ng gian ho·∫∑c ph√©p chi·∫øu song song).<br>K·∫øt qu·∫£ t√≠nh to√°n cho ra t·ªâ s·ªë b·∫±ng 2."
            },
            {
                q: "Cho bi·∫øt $lim_{x\\rightarrow1}\\frac{x+a-\\sqrt{bx+3}}{2x^{3}-3x^{2}+1}=c$ v·ªõi a,b, $c\\in\\mathbb{Q}$, $a>0$. T√≠nh 6abc",
                answers: ["4"],
                explain: "M·∫´u c√≥ nghi·ªám k√©p x=1. T·ª≠ ph·∫£i c√≥ nghi·ªám k√©p x=1.<br>ƒêi·ªÅu ki·ªán t·ª≠=0 t·∫°i 1: $1+a = \\sqrt{b+3}$.<br>ƒê·∫°o h√†m t·ª≠=0 t·∫°i 1 (quy t·∫Øc L'Hopital b·∫≠c 2): $1 - \\frac{b}{2\\sqrt{b+3}} = 0$.<br>Gi·∫£i h·ªá: $b=6, a=2$.<br>T√≠nh gi·ªõi h·∫°n ra $c=1/18$.<br>K·∫øt qu·∫£ $6abc = 6.2.6.(1/18) = 4$."
            },
            {
                q: "ƒê·ªÉ trang ho√†ng cho cƒÉn h·ªô c·ªßa m√¨nh, ch√∫ chu·ªôt Mickey quy·∫øt ƒë·ªãnh t√¥ m√†u m·ªôt mi·∫øng b√¨a h√¨nh vu√¥ng c·∫°nh b·∫±ng 1. N√≥ t√¥ m√†u x√°m c√°c h√¨nh vu√¥ng nh·ªè ƒë∆∞·ª£c ƒë√°nh s·ªë l·∫ßn l∆∞·ª£t l√† $1,2,3,4,...n,...$ trong ƒë√≥ c·∫°nh c·ªßa h√¨nh vu√¥ng k·∫ø ti·∫øp b·∫±ng m·ªôt n·ª≠a c·∫°nh h√¨nh vu√¥ng tr∆∞·ªõc ƒë√≥. Gi·∫£ s·ª≠ quy tr√¨nh t√¥ m√†u c·ªßa chu·ªôt Mickey c√≥ th·ªÉ ti·∫øn ra v√¥ h·∫°n (nh∆∞ h√¨nh v·∫Ω d∆∞·ªõi ƒë√¢y). T√≠nh t·ªïng di·ªán t√≠ch m√† chu·ªôt Mickey ph·∫£i t√¥ m√†u.",
                answers: ["4/3", "1.33", "1,33"],
                explain: "Di·ªán t√≠ch c√°c h√¨nh: $1^2, (1/2)^2, (1/4)^2...$<br>CSN l√πi v√¥ h·∫°n $u_1=1, q=1/4$.<br>T·ªïng $S = 1 / (1-1/4) = 4/3$."
            },
            {
                q: "Cho h√†m s·ªë $f(x)=\\begin{cases}\\frac{x^{4}-3x^{2}+2}{x^{2}-1}&v\\hat{i}x>1\\\\ ax+2&v\\hat{i}x\\le1\\end{cases}$ . T·∫°i $a=a_{4}$ th√¨ h√†m s·ªë ƒë√£ cho li√™n t·ª•c tr√™n R. Gi√° tr·ªã c·ªßa bi·ªÉu th·ª©c $A={a_{o}}^{2}+1$ l√†",
                answers: ["10"],
                explain: "Khi $x \\to 1^+$, t·ª≠ ph√¢n t√≠ch th√†nh $(x^2-1)(x^2-2)$. R√∫t g·ªçn c√≤n $x^2-2$. Gi·ªõi h·∫°n = -1.<br>ƒê·ªÉ li√™n t·ª•c: $a(1)+2 = -1 \\Rightarrow a=-3$.<br>$A = (-3)^2 + 1 = 10$."
            },
            {
                q: "Cho h√¨nh ch√≥p S.ABCD c√≥ ƒë√°y l√† h√¨nh thang v·ªõi AD//BC v√† $AD=3BC$. G·ªçi O l√† giao ƒëi·ªÉm c·ªßa AC v√† BD; I l√† ƒëi·ªÉm thu·ªôc ƒëo·∫°n SC sao cho $\\frac{CI}{CS}=x.Tim~x~d\\dot{e}OI//(SAD)$ .",
                answers: ["0.25", "1/4", "0,25"],
                explain: "Ta c√≥ $OI // (SAD) \\Rightarrow OI // SA$.<br>Trong tam gi√°c SAC, $OI // SA \\Rightarrow \\frac{CI}{CS} = \\frac{CO}{CA}$.<br>Do $BC // AD \\Rightarrow \\Delta COB \\sim \\Delta AOD \\Rightarrow \\frac{CO}{OA} = \\frac{CB}{AD} = \\frac{1}{3}$.<br>Suy ra $\\frac{CO}{CA} = \\frac{1}{4}$.<br>V·∫≠y $x = 1/4$."
            },
            {
                q: "Sau khi ph√°t hi·ªán m·ªôt b·ªánh d·ªãch, c√°c chuy√™n gia y t·∫ø ∆∞·ªõc t√≠nh s·ªë ng∆∞·ªùi nhi·ªÖm b·ªánh k·ªÉ t·ª´ ng√†y xu·∫•t hi·ªán b·ªánh nh√¢n ƒë·∫ßu ti√™n bi·∫øn ƒë·ªïi theo m·ªôt h√†m s·ªë th·ªùi gian (t√≠nh theo ng√†y) l√† $g(t)=45t^{2}-t^{3}$ (ng∆∞·ªùi). T·ªëc ƒë·ªô trung b√¨nh gia tƒÉng ng∆∞·ªùi b·ªánh gi·ªØa hai th·ªùi ƒëi·ªÉm $t_{1}$, $t_{2}$ l√† $V_{tb}=\\frac{g(t_{2})-g(t_{1})}{t_{2}-t_{1}}$. T√≠nh $lim_{t\\rightarrow10}\\frac{g(t)-g(10)}{t-10}$.",
                answers: ["600"],
                explain: "Gi·ªõi h·∫°n n√†y ch√≠nh l√† ƒë·∫°o h√†m $g'(10)$.<br>$g'(t) = 90t - 3t^2$.<br>$g'(10) = 900 - 300 = 600$."
            },
            {
                q: "Cho $lim_{x\\rightarrow1}\\frac{f(x)-10}{x-1}=5$ Gi·ªõi h·∫°n $lim_{z\\rightarrow1}\\frac{f(x)-10}{(\\sqrt{x}-1)(\\sqrt{4f(x)+9}+3)}b\\dot{a}ng$",
                answers: ["1"],
                explain: "Bi·∫øn ƒë·ªïi bi·ªÉu th·ª©c:<br>$\\frac{f(x)-10}{x-1} \\cdot \\frac{x-1}{\\sqrt{x}-1} \\cdot \\frac{1}{\\sqrt{4f(x)+9}+3}$.<br>Th√†nh ph·∫ßn 1: ƒë·ªÅ cho b·∫±ng 5.<br>Th√†nh ph·∫ßn 2: $lim (\\sqrt{x}+1) = 2$.<br>Th√†nh ph·∫ßn 3: V√¨ m·∫´u -> 0 th√¨ f(x)->10. Thay v√†o cƒÉn: $\\sqrt{40+9}+3 = 10$.<br>K·∫øt qu·∫£: $5 \\cdot 2 \\cdot \\frac{1}{10} = 1$."
            },
            {
                q: "Cho c√°c s·ªë th·ª±c a, b, c th·ªèa m√£n $-8+4a-2b+c>0$ v√† $8+4a+2b+c<0$. S·ªë giao ƒëi·ªÉm c·ªßa ƒë·ªì th·ªã h√†m s·ªë $y=x^{3}+ax^{2}+bx+c$ v√† tr·ª•c Ox l√†",
                answers: ["3"],
                explain: "ƒê·∫∑t $f(x)$.<br>$f(-2) = -8+4a-2b+c > 0$.<br>$f(2) = 8+4a+2b+c < 0$.<br>$f(x) \\to -\\infty$ khi $x \\to -\\infty$.<br>$f(x) \\to +\\infty$ khi $x \\to +\\infty$.<br>ƒê·ªì th·ªã ƒë·ªïi d·∫•u 3 l·∫ßn: (-vc; -2), (-2; 2), (2; +vc).<br>V·∫≠y c√≥ 3 nghi·ªám."
            },
            {
                q: "Cho h√¨nh ch√≥p S.ABCD c√≥ ƒë√°y ABCD l√† h√¨nh b√¨nh h√†nh. G·ªçi G l√† tr·ªçng t√¢m tam gi√°c ABC v√† M l√† trung ƒëi·ªÉm c·∫°nh SC. G·ªçi K l√† giao ƒëi·ªÉm c·ªßa SD v·ªõi m·∫∑t ph·∫≥ng (AGM). T√≠nh t·ª∑ s·ªë $\\frac{KS}{KD}$",
                answers: ["0.5", "1/2", "0,5"],
                explain: "S·ª≠ d·ª•ng ph∆∞∆°ng ph√°p giao tuy·∫øn v√† t·ªâ l·ªá.<br>G thu·ªôc BO. (SBD) ch·ª©a S, D, G.<br>K·∫øt qu·∫£ t√≠nh to√°n trong m√¥ h√¨nh h√¨nh h·ªçc kh√¥ng gian cho t·ªâ s·ªë 1/2."
            },
            {
                q: "Cho h√¨nh h·ªôp ch·ªØ nh·∫≠t $ABCD.A^{\\prime}B^{\\prime}C^{\\prime}D^{\\prime}$ c√≥ M, N, P l·∫ßn l∆∞·ª£t l√† c√°c ƒëi·ªÉm n·∫±m tr√™n ba c·∫°nh AA', $BB^{\\prime}$, $CC^{\\prime}$ sao cho , $AM=\\frac{1}{2}AA^{\\prime}$ , , $BN=\\frac{1}{3}BB^{\\prime}$ $CP=\\frac{1}{4}CC^{\\prime}$ . G·ªçi Q l√† giao ƒëi·ªÉm c·ªßa m·∫∑t ph·∫≥ng (MNP) v·ªõi ƒë∆∞·ªùng th·∫≥ng $DD^{\\prime}$. Khi ƒë√≥ t·ªâ s·ªë $\\frac{D^{\\prime}Q}{DD^{\\prime}}$ b·∫±ng bao nhi√™u?",
                answers: ["5/12", "0.416"],
                explain: "C√¥ng th·ª©c t·ªâ s·ªë kho·∫£ng c√°ch cho m·∫∑t ph·∫≥ng c·∫Øt h√¨nh h·ªôp:<br>$k_A + k_C = k_B + k_D$.<br>$1/2 + 1/4 = 1/3 + x$.<br>$3/4 = 1/3 + x \\Rightarrow x = 5/12$."
            },
             {
                q: "Cho c√°c s·ªë th·ª±c a, b, c th·ªèa m√£n $\\begin{cases}-8+4a-2b+c>0\\\\ 8+4a+2b+c<0\\end{cases}$. Khi ƒë√≥ s·ªë nghi·ªám th·ª±c ph√¢n bi·ªát c·ªßa ph∆∞∆°ng tr√¨nh $x^{3}+ax^{2}+bx+c=0$ b·∫±ng bao nhi√™u?",
                answers: ["3"],
                explain: "T∆∞∆°ng t·ª± c√¢u tr√™n, h√†m s·ªë li√™n t·ª•c ƒë·ªïi d·∫•u 3 l·∫ßn tr√™n tr·ª•c s·ªë n√™n c√≥ 3 nghi·ªám."
            },
             {
                q: "Cho t·ª© di·ªán ABCD. G·ªçi I, J l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa AC v√† BC. Tr√™n c·∫°nh BD l·∫•y ƒëi·ªÉm K sao cho $BK=2KD$. G·ªçi F l√† giao ƒëi·ªÉm c·ªßa AD v·ªõi m·∫∑t ph·∫≥ng (IJK). T√≠nh t·ªâ s·ªë $\\frac{FA}{FD}$",
                answers: ["2"],
                explain: "IJ // AB. (IJK) c·∫Øt (ABD) theo giao tuy·∫øn qua K song song AB, c·∫Øt AD t·∫°i F.<br>Trong tam gi√°c ABD: KF // AB.<br>Thales: $DF/DA = DK/DB = 1/3$.<br>Suy ra $FA = 2/3 DA$. T·ªâ s·ªë $FA/FD = 2$."
            },
            {
                q: "Cho t·ª© di·ªán ABCD c√≥ $AB=2AC=4AD$. G·ªçi O, O' l·∫ßn l∆∞·ª£t l√† t√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp c·ªßa c√°c tam gi√°c ABC v√† ABD. T√≠nh t·ªâ s·ªë $k=\\frac{BC}{BD}$ khi $OO^{\\prime}//(BCD)$.",
                answers: ["1.2", "1,2", "6/5"],
                explain: "S·ª≠ d·ª•ng t√≠nh ch·∫•t ƒë∆∞·ªùng ph√¢n gi√°c v√† ƒë·ªãnh l√Ω Thales ƒë·∫£o trong kh√¥ng gian.<br>ƒêi·ªÅu ki·ªán song song d·∫´n ƒë·∫øn t·ªâ l·ªá c·∫°nh: $k = 1.2$."
            },
             {
                q: "Cho h√¨nh ch√≥p S.ABC c√≥ ƒë√°y l√† tam gi√°c ABC th·ªèa m√£n $AB=AC=2\\sqrt{3}$, $BAC=30^{\\circ}$. M·∫∑t ph·∫≥ng (P) song song v·ªõi (ABC) c·∫Øt ƒëo·∫°n SA t·∫°i M sao cho $SA=3AM$. Thi·∫øt di·ªán c·ªßa m·∫∑t ph·∫≥ng (P) v√† h√¨nh ch√≥p S.ABC c√≥ di·ªán t√≠ch b·∫±ng",
                answers: ["4/3", "1.33"],
                explain: "T·ªâ s·ªë ƒë·ªìng d·∫°ng $k = SM/SA = 2/3$ (do AM = 1/3 SA).<br>Di·ªán t√≠ch ƒë√°y $S_{ABC} = 1/2 . AB . AC . sin30 = 3$.<br>Di·ªán t√≠ch thi·∫øt di·ªán = $k^2 . S_{ABC} = (4/9) . 3 = 4/3$."
            }
        ];

        // --- GAME LOGIC ---
        let currentTest = { p1: [], p2: [], p3: [] };
        let userResults = { p1: {}, p2: {}, p3: {} };
        let timerInterval;
        let timeLeft = 90 * 60; // 90 mins
        let timeSpentSeconds = 0; // Track actual time spent

        // Random Selector
        function getRandomSubarray(arr, size) {
            const shuffled = [...arr].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, size);
        }

        function startGame() {
            const name = document.getElementById('student-name').value.trim();
            const className = document.getElementById('student-class').value.trim();
            
            if(!name || !className) { 
                alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß H·ªç t√™n v√† L·ªõp!"); 
                return; 
            }
            
            document.getElementById('player-display').innerText = `H·ªçc sinh: ${name} | L·ªõp: ${className}`;
            document.getElementById('player-display').classList.remove('hidden');
            
            // Generate Test Structure
            // Part 1: 12 Qs
            currentTest.p1 = getRandomSubarray(bankMCQ, 12).map((q, i) => ({...q, id: `p1_${i}`}));
            // Part 2: 4 Qs
            currentTest.p2 = getRandomSubarray(bankTF, 4).map((q, i) => ({...q, id: `p2_${i}`}));
            // Part 3: 6 Qs
            currentTest.p3 = getRandomSubarray(bankShort, 6).map((q, i) => ({...q, id: `p3_${i}`}));

            renderQuiz();
            
            // Switch Screens
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('timer-box').classList.remove('hidden');
            document.getElementById('footer-actions').classList.remove('hidden');

            // Timer
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                const m = Math.floor(timeLeft/60);
                const s = timeLeft % 60;
                document.getElementById('timer-box').innerText = `${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
                if(timeLeft <= 0) submitTest();
            }, 1000);
        }

        function renderQuiz() {
            // Render Part 1
            const p1Div = document.getElementById('list-mcq');
            p1Div.innerHTML = currentTest.p1.map((q, idx) => `
                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm relative">
                    <div class="absolute -left-2 top-4 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-r shadow">C√¢u ${idx+1}</div>
                    <div class="pl-6 mb-3 math-content font-medium">${q.q}</div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 pl-6">
                        ${['a','b','c','d'].map(opt => `
                            <label class="cursor-pointer">
                                <input type="radio" name="${q.id}" value="${opt}" class="option-radio hidden" onchange="trackProgress()">
                                <div class="border border-gray-200 p-3 rounded-lg hover:bg-gray-50 flex items-center transition">
                                    <span class="w-6 h-6 border rounded-full flex items-center justify-center mr-2 text-xs font-bold text-gray-500 uppercase">${opt}</span>
                                    <span class="math-content text-sm">${q[opt]}</span>
                                </div>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            // Render Part 2
            const p2Div = document.getElementById('list-tf');
            p2Div.innerHTML = currentTest.p2.map((q, idx) => `
                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm relative">
                    <div class="absolute -left-2 top-4 bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-r shadow">C√¢u ${idx+1}</div>
                    <div class="pl-6 mb-4 math-content font-medium text-purple-900 bg-purple-50/50 p-2 rounded">${q.q}</div>
                    <div class="pl-6 space-y-2">
                        ${q.items.map(item => `
                            <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <div class="math-content text-sm flex-grow pr-4">${item.id}) ${item.text}</div>
                                <div class="flex gap-2 shrink-0">
                                    <button onclick="selectTF('${q.id}', '${item.id}', true, this)" class="tf-btn border px-3 py-1 rounded text-xs font-bold text-gray-500 hover:bg-gray-100">ƒê√öNG</button>
                                    <button onclick="selectTF('${q.id}', '${item.id}', false, this)" class="tf-btn border px-3 py-1 rounded text-xs font-bold text-gray-500 hover:bg-gray-100">SAI</button>
                                    <input type="hidden" name="${q.id}_${item.id}">
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            // Render Part 3
            const p3Div = document.getElementById('list-short');
            p3Div.innerHTML = currentTest.p3.map((q, idx) => `
                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm relative">
                    <div class="absolute -left-2 top-4 bg-orange-600 text-white text-xs font-bold px-2 py-1 rounded-r shadow">C√¢u ${idx+1}</div>
                    <div class="pl-6 mb-3 math-content font-medium">${q.q}</div>
                    <div class="pl-6">
                        <input type="text" name="${q.id}" class="w-full md:w-1/2 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 outline-none" placeholder="Nh·∫≠p ƒë√°p √°n c·ªßa b·∫°n..." oninput="trackProgress()">
                    </div>
                </div>
            `).join('');

            // Retypeset MathJax
            if(window.MathJax) MathJax.typesetPromise();
        }

        // --- INTERACTION ---
        function selectTF(qId, itemId, isTrue, btn) {
            // Update UI
            const parent = btn.parentElement;
            parent.querySelectorAll('.tf-btn').forEach(b => {
                b.classList.remove('selected-true', 'selected-false');
            });
            
            if(isTrue) btn.classList.add('selected-true');
            else btn.classList.add('selected-false');

            // Save value
            const input = parent.querySelector('input[type="hidden"]');
            input.value = isTrue.toString();
            trackProgress();
        }

        function trackProgress() {
            // Count P1
            const p1Done = currentTest.p1.filter(q => document.querySelector(`input[name="${q.id}"]:checked`)).length;
            
            // Count P2 (Fully answered questions)
            let p2Done = 0;
            currentTest.p2.forEach(q => {
                const subAnswered = q.items.filter(item => document.querySelector(`input[name="${q.id}_${item.id}"]`).value !== "").length;
                if(subAnswered === 4) p2Done++;
            });

            // Count P3
            const p3Done = currentTest.p3.filter(q => document.querySelector(`input[name="${q.id}"]`).value.trim() !== "").length;

            const total = 12 + 4 + 6;
            const current = p1Done + p2Done + p3Done;
            
            document.getElementById('progress-count').innerText = `${current}/${total}`;
            document.getElementById('mini-progress').style.width = `${(current/total)*100}%`;
        }

        // --- DATA SUBMISSION ---
        function sendToGoogleSheet(data) {
            if (!GOOGLE_SCRIPT_URL) {
                console.warn("Ch∆∞a c·∫•u h√¨nh URL Google Script.");
                return;
            }

            const statusDiv = document.getElementById('submit-status');
            statusDiv.classList.remove('hidden');
            statusDiv.innerText = "ƒêang l∆∞u ƒëi·ªÉm l√™n h·ªá th·ªëng...";

            // Use fetch with no-cors mode for simple submission
            // Note: We won't get a readable response, but the data will be sent.
            const formData = new FormData();
            for (const key in data) {
                formData.append(key, data[key]);
            }

            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                body: formData,
                mode: "no-cors" // Important for client-side without backend
            })
            .then(() => {
                statusDiv.innerText = "‚úÖ ƒê√£ l∆∞u ƒëi·ªÉm th√†nh c√¥ng!";
                statusDiv.classList.add("text-green-600");
            })
            .catch(error => {
                console.error("L·ªói g·ª≠i ƒëi·ªÉm:", error);
                statusDiv.innerText = "‚ö†Ô∏è Kh√¥ng th·ªÉ l∆∞u ƒëi·ªÉm t·ª± ƒë·ªông. Vui l√≤ng b√°o gi√°o vi√™n.";
                statusDiv.classList.add("text-red-500");
            });
        }

        // --- SCORING & RESULT ---
        function submitTest() {
            clearInterval(timerInterval);
            timeSpentSeconds = (90 * 60) - timeLeft;
            
            // Format time taken
            const min = Math.floor(timeSpentSeconds / 60);
            const sec = timeSpentSeconds % 60;
            const timeString = `${min} ph√∫t ${sec} gi√¢y`;

            let scoreP1 = 0, scoreP2 = 0, scoreP3 = 0;

            // 1. Grade MCQ (0.25 each)
            currentTest.p1.forEach(q => {
                const selected = document.querySelector(`input[name="${q.id}"]:checked`)?.value;
                userResults.p1[q.id] = { selected, correct: q.correct, explain: q.explain };
                if(selected === q.correct) scoreP1 += 0.25;
            });

            // 2. Grade TF (Complex rule)
            // Rules: 1 correct=0.1, 2=0.25, 3=0.5, 4=1.0
            const tfPoints = [0, 0.1, 0.25, 0.5, 1.0];
            currentTest.p2.forEach(q => {
                let correctCount = 0;
                let details = {};
                q.items.forEach(item => {
                    const valStr = document.querySelector(`input[name="${q.id}_${item.id}"]`).value;
                    const val = valStr === 'true'; // Convert "true"/"false" string to boolean
                    const isCorrect = (valStr !== "" && val === item.correct);
                    if(isCorrect) correctCount++;
                    details[item.id] = { selected: valStr !== "" ? val : null, correct: item.correct };
                });
                scoreP2 += tfPoints[correctCount];
                userResults.p2[q.id] = { correctCount, points: tfPoints[correctCount], details, explain: q.explain };
            });

            // 3. Grade Short Answer (0.5 each)
            currentTest.p3.forEach(q => {
                const inputVal = document.querySelector(`input[name="${q.id}"]`).value.trim().toLowerCase();
                // Check against list
                const isCorrect = q.answers.some(ans => ans.toLowerCase() === inputVal);
                userResults.p3[q.id] = { input: inputVal, acceptable: q.answers, isCorrect, explain: q.explain };
                if(isCorrect) scoreP3 += 0.5;
            });

            // Final Tally
            const totalScore = Math.min(10, scoreP1 + scoreP2 + scoreP3); // Cap at 10 just in case floating point weirdness
            
            // Show Result
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('footer-actions').classList.add('hidden');
            document.getElementById('timer-box').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            // Animate Score
            document.getElementById('score-p1').innerText = `${scoreP1.toFixed(2)} / 3.0`;
            document.getElementById('score-p2').innerText = `${scoreP2.toFixed(2)} / 4.0`;
            document.getElementById('score-p3').innerText = `${scoreP3.toFixed(2)} / 3.0`;
            document.getElementById('total-score').innerText = totalScore.toFixed(2);

            if(totalScore >= 8) document.getElementById('result-emoji').innerText = "üåü";
            else if(totalScore >= 5) document.getElementById('result-emoji').innerText = "üëç";
            else document.getElementById('result-emoji').innerText = "üí™";

            // Submit Data
            const studentName = document.getElementById('student-name').value;
            const studentClass = document.getElementById('student-class').value;
            
            const submitData = {
                name: studentName,
                class_name: studentClass,
                score: totalScore.toFixed(2),
                p1: scoreP1.toFixed(2),
                p2: scoreP2.toFixed(2),
                p3: scoreP3.toFixed(2),
                time_taken: timeString
            };
            
            sendToGoogleSheet(submitData);
        }

        function showDetailReview() {
            const container = document.getElementById('review-container');
            const content = document.getElementById('review-content');
            container.classList.remove('hidden');
            content.innerHTML = ""; // Clear old

            // Render Review P1
            content.innerHTML += `<h4 class="font-bold text-blue-800 bg-blue-50 p-2 rounded">PH·∫¶N 1: TR·∫ÆC NGHI·ªÜM</h4>`;
            currentTest.p1.forEach((q, idx) => {
                const res = userResults.p1[q.id];
                const isCorrect = res.selected === res.correct;
                // No 'correct' badge shown here, only user selection
                content.innerHTML += `
                    <div class="p-4 border rounded-lg ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'} shadow-sm">
                        <div class="font-medium text-sm mb-2">C√¢u ${idx+1}: ${q.q}</div>
                        <div class="text-xs mb-3 font-bold ${isCorrect ? 'text-green-700' : 'text-red-700'}">
                            B·∫°n ch·ªçn: ${res.selected ? res.selected.toUpperCase() : 'B·ªè qua'} ${isCorrect ? '‚úî' : '‚úò'}
                        </div>
                        <div class="bg-white p-3 rounded border border-gray-100">
                            <p class="text-xs font-bold text-gray-500 mb-1">H∆Ø·ªöNG D·∫™N GI·∫¢I:</p>
                            <div class="text-sm text-gray-700 math-content">${res.explain}</div>
                        </div>
                    </div>
                `;
            });

            // Render Review P2
            content.innerHTML += `<h4 class="font-bold text-purple-800 bg-purple-50 p-2 rounded mt-4">PH·∫¶N 2: ƒê√öNG SAI</h4>`;
            currentTest.p2.forEach((q, idx) => {
                const res = userResults.p2[q.id];
                content.innerHTML += `
                    <div class="p-4 border rounded-lg bg-white shadow-sm">
                        <div class="font-medium text-sm mb-2">C√¢u ${idx+1}: ${q.q}</div>
                        <div class="mb-3 space-y-1">
                            ${q.items.map(item => {
                                const subRes = res.details[item.id];
                                const isSubCorrect = subRes.selected === subRes.correct;
                                return `
                                    <div class="text-xs flex justify-between p-2 rounded ${isSubCorrect ? 'bg-green-100' : 'bg-red-100'}">
                                        <span>${item.id}) ${item.text}</span>
                                        <span class="font-mono font-bold">
                                            Ch·ªçn: ${subRes.selected === null ? '---' : (subRes.selected ? 'ƒê' : 'S')}
                                        </span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        <div class="bg-gray-50 p-3 rounded border border-gray-100">
                            <p class="text-xs font-bold text-gray-500 mb-1">H∆Ø·ªöNG D·∫™N GI·∫¢I CHI TI·∫æT:</p>
                            <div class="text-sm text-gray-700 math-content">${res.explain}</div>
                        </div>
                    </div>
                `;
            });

            // Render Review P3
            content.innerHTML += `<h4 class="font-bold text-orange-800 bg-orange-50 p-2 rounded mt-4">PH·∫¶N 3: TR·∫¢ L·ªúI NG·∫ÆN</h4>`;
            currentTest.p3.forEach((q, idx) => {
                const res = userResults.p3[q.id];
                content.innerHTML += `
                    <div class="p-4 border rounded-lg ${res.isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'} shadow-sm">
                        <div class="font-medium text-sm mb-2">C√¢u ${idx+1}: ${q.q}</div>
                        <div class="text-xs mb-3">
                            <span class="${res.isCorrect ? 'text-green-700' : 'text-red-700'} font-bold">Tr·∫£ l·ªùi: ${res.input || '(Tr·ªëng)'}</span>
                        </div>
                        <div class="bg-white p-3 rounded border border-gray-100">
                            <p class="text-xs font-bold text-gray-500 mb-1">H∆Ø·ªöNG D·∫™N GI·∫¢I:</p>
                            <div class="text-sm text-gray-700 math-content">${res.explain}</div>
                        </div>
                    </div>
                `;
            });

            // Typeset Math in Review
            if(window.MathJax) MathJax.typesetPromise();
            
            // Scroll to review
            container.scrollIntoView({behavior: 'smooth'});
        }

        function restartGame() {
            window.location.reload();
        }
    </script>
</body>

</html>
